# Ray Cluster Configuration
# This file controls various Ray cluster settings including memory allocation

ray:
  cluster:
    # Plasma store memory allocation (in bytes)
    # This is the shared memory object store used for data sharing between Ray workers
    # Current setting: 15GB (insufficient for peak loads)
    plasma_store_memory: 16106127360
    
    # Node manager port for Ray internal communication
    node_manager_port: 8076
    
    # Object manager port for object transfers
    object_manager_port: 8077
    
    # Raylet socket location
    raylet_socket_name: /tmp/ray/session_latest/sockets/raylet
    
    # Temporary directory for Ray files
    temp_dir: /tmp/ray
    
    # Directory for Ray logs
    log_dir: /var/log/ray
    
    # Number of worker processes per node (auto-detected if not specified)
    num_workers: auto
    
    # Maximum number of concurrent tasks per worker
    max_calls: 1000
    
    # Heartbeat timeout in milliseconds
    raylet_heartbeat_timeout_milliseconds: 30000
    
    # Enable object spilling to disk when plasma store is full
    object_spilling_config:
      type: filesystem
      params:
        directory_path: /tmp/ray/spill

  # Resource limits and scheduling
  resources:
    # CPU cores available per node (auto-detected)
    CPU: auto
    # GPU devices available per node
    GPU: 0
    
  # Logging configuration
  logging:
    level: INFO
    format: "%(asctime)s %(levelname)s %(name)s: %(message)s"