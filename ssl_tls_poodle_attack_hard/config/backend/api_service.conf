<VirtualHost *:443>
    ServerName api-internal.example.com
    ServerAdmin webmaster@example.com
    DocumentRoot /var/www/api-internal
    
    # SSL Configuration
    SSLEngine on
    SSLProtocol SSLv3 TLSv1 TLSv1.1
    SSLCipherSuite ECDHE-RSA-AES128-SHA:ECDHE-RSA-AES256-SHA:AES128-CBC-SHA:AES256-CBC-SHA:DES-CBC3-SHA
    SSLHonorCipherOrder on
    
    # SSL Certificates
    SSLCertificateFile /etc/ssl/certs/api-internal.crt
    SSLCertificateKeyFile /etc/ssl/private/api-internal.key
    SSLCertificateChainFile /etc/ssl/certs/intermediate.crt
    
    # Directory Configuration
    <Directory /var/www/api-internal>
        Options -Indexes +FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
    
    # Logging
    ErrorLog ${APACHE_LOG_DIR}/api-internal-error.log
    CustomLog ${APACHE_LOG_DIR}/api-internal-access.log combined
    LogLevel warn
    
    # Security Headers
    Header always set X-Frame-Options "SAMEORIGIN"
    Header always set X-Content-Type-Options "nosniff"
    
    # API specific settings
    ProxyPreserveHost On
    ProxyPass /api http://localhost:8080/api
    ProxyPassReverse /api http://localhost:8080/api
    
    # Timeout settings
    Timeout 300
    KeepAlive On
    MaxKeepAliveRequests 100
    KeepAliveTimeout 5
</VirtualHost>