[
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"```python"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"import os"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"import json"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"import pandas as pd"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"import numpy as np"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"from pathlib import Path"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"print(\"=== Exploring Environment ===\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    indent = ' ' * 2 * level"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    print(f'{indent}{os.path.basename(root)}\/')"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    subindent = ' ' * 2 * (level + 1)"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    for file in files:"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"        print(f'{subindent}{file}')"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"```"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"```python"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"# Check the models directory"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"models_dir = Path('\/var\/ml\/models')"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"data_dir = Path('\/var\/ml\/data')"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"output_dir = Path('\/var\/ml\/output')"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"# Create output directory if it doesn't exist"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"# List all model files"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"print(\"\\n=== Model Files ===\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"model_files = list(models_dir.glob('*.json'))"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"for f in sorted(model_files):"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    print(f.name)"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"```"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"```python"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"# Load and inspect the data files"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"print(\"\\n=== Loading Data ===\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"# Load features.csv"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"features_df = pd.read_csv(data_dir \/ 'features.csv')"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"print(f\"\\nFeatures shape: {features_df.shape}\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"print(f\"Features columns: {list(features_df.columns)}\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"print(\"\\nFirst few rows of features:\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"print(features_df.head())"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"# Load validation.csv"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"validation_df = pd.read_csv(data_dir \/ 'validation.csv')"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"print(f\"\\nValidation shape: {validation_df.shape}\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"print(f\"Validation columns: {list(validation_df.columns)}\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"print(\"\\nFirst few rows of validation:\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"print(validation_df.head())"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"print(f\"\\nValidation label distribution:\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"print(validation_df['label'].value_counts())"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"```"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"```python"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"# Parse and validate all model files"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"print(\"\\n=== Parsing Models ===\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"valid_models = []"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"invalid_models = []"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"for model_file in sorted(model_files):"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    try:"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"            model_data = json.load(f)"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"        # Validate model structure"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"        if not all(field in model_data for field in required_fields):"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"            continue"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"        # Check if weights is a dictionary"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"            continue"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"        # Check if bias is a number"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"            continue"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"        weights = model_data['weights']"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"            continue"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"        if not np.isfinite(model_data['bias']):"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"            continue"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"        valid_models.append({"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"            'bias': model_data['bias']"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"        })"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"        print(f\"\u2713 {model_file.name}: Valid (features: {list(weights.keys())})\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    except json.JSONDecodeError as e:"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    except Exception as e:"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"if invalid_models:"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    print(\"\\nInvalid models:\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"        print(f\"  \u2717 {name}: {reason}\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"```"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"```python"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"# Define prediction function for a single model"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    \"\"\""
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    Make predictions using a single model."
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    Returns logits (before sigmoid\/threshold)."
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    \"\"\""
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    predictions = []"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"        # Calculate weighted sum"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"        score = model['bias']"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"            if feature_name in features_df.columns:"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"                score += weight * row[feature_name]"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"        predictions.append(score)"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    return np.array(predictions)"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"# Test prediction function with validation data"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"print(\"\\n=== Testing Individual Models on Validation Set ===\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"model_predictions_val = []"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"model_accuracies = []"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"for model in valid_models:"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    preds = (logits > 0).astype(int)  # Threshold at 0"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    accuracy = (preds == validation_df['label'].values).mean()"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    model_accuracies.append(accuracy)"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    model_predictions_val.append(preds)"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    print(f\"{model['name']}: Accuracy = {accuracy:.4f}\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"```"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"```python"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"# Try different ensemble strategies"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"print(\"\\n=== Testing Ensemble Strategies ===\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"# Convert to numpy array for easier manipulation"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"predictions_matrix = np.array(model_predictions_val)"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"# Strategy 1: Majority vote"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"majority_vote = (predictions_matrix.mean(axis=0) > 0.5).astype(int)"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"majority_accuracy = (majority_vote == validation_df['label'].values).mean()"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"print(f\"Majority Vote: Accuracy = {majority_accuracy:.4f}\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"# Strategy 2: Weighted by individual accuracy"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"weights = np.array(model_accuracies)"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"weighted_vote = (predictions_matrix.T @ weights \/ weights.sum() > 0.5).astype(int)"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"weighted_accuracy = (weighted_vote == validation_df['label'].values).mean()"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"print(f\"Weighted Vote (by accuracy): Accuracy = {weighted_accuracy:.4f}\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"# Strategy 3: Average logits then threshold"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"model_logits_val = []"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"for model in valid_models:"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    model_logits_val.append(logits)"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"avg_logits_preds = (avg_logits > 0).astype(int)"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"avg_logits_accuracy = (avg_logits_preds == validation_df['label'].values).mean()"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"print(f\"Average Logits: Accuracy = {avg_logits_accuracy:.4f}\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"# Strategy 4: Weighted average logits by accuracy"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"weighted_logits_preds = (weighted_logits > 0).astype(int)"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"weighted_logits_accuracy = (weighted_logits_preds == validation_df['label'].values).mean()"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"print(f\"Weighted Average Logits: Accuracy = {weighted_logits_accuracy:.4f}\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"# Choose the best strategy"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"strategies = ["
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"]"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"print(f\"\\n\u2713 Best Strategy: {best_strategy[0]} with accuracy {best_strategy[1]:.4f}\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"```"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"```python"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"# Generate predictions for the test set (features.csv)"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"print(\"\\n=== Generating Final Predictions ===\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"if best_strategy[1] >= 0.80:"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    print(f\"\u2713 Validation accuracy {best_strategy[1]:.4f} meets threshold (\u2265 0.80)\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    # Use the best strategy to predict on features.csv"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    strategy_name = best_strategy[0]"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    if strategy_name == \"majority_vote\":"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"        model_predictions_test = []"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"        for model in valid_models:"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"            preds = (logits > 0).astype(int)"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"            model_predictions_test.append(preds)"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"        predictions_matrix_test = np.array(model_predictions_test)"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"        final_predictions = (predictions_matrix_test.mean(axis=0) > 0.5).astype(int)"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    elif strategy_name == \"weighted_vote\":"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"        model_predictions_test = []"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"        for model in valid_models:"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"            preds = (logits > 0).astype(int)"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"            model_predictions_test.append(preds)"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"        predictions_matrix_test = np.array(model_predictions_test)"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"        final_predictions = (predictions_matrix_test.T @ weights \/ weights.sum() > 0.5).astype(int)"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    elif strategy_name == \"avg_logits\":"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"        model_logits_test = []"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"        for model in valid_models:"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"            model_logits_test.append(logits)"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"        final_predictions = (avg_logits_test > 0).astype(int)"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    else:  # weighted_logits"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"        model_logits_test = []"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"        for model in valid_models:"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"            model_logits_test.append(logits)"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"        final_predictions = (weighted_logits_test > 0).astype(int)"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    # Prepare output"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    output = {"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"        \"accuracy\": float(best_strategy[1])"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    }"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    # Validate output format"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    # Save output"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    output_path = output_dir \/ 'ensemble_predictions.json'"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    print(f\"\\n\u2713 Predictions saved to {output_path}\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    print(f\"  - Number of predictions: {len(output['predictions'])}\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    print(f\"  - Validation accuracy: {output['accuracy']:.4f}\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    print(f\"  - Prediction distribution: {np.bincount(output['predictions'])}\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"else:"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    print(f\"\u2717 Best accuracy {best_strategy[1]:.4f} does not meet threshold (\u2265 0.80)\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    print(\"Need to try other approaches...\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"```"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"```python"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"# Verify the output file"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"print(\"\\n=== Verification ===\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"    saved_output = json.load(f)"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"print(f\"Output file structure: {list(saved_output.keys())}\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"print(f\"Predictions type: {type(saved_output['predictions'])}\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"print(f\"Predictions length: {len(saved_output['predictions'])}\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"print(f\"Features.csv length: {len(features_df)}\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"print(f\"Match: {len(saved_output['predictions']) == len(features_df)}\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"print(f\"Accuracy: {saved_output['accuracy']}\")"
  },
  {
    "I'll help you restore the legacy prediction service. Let me start by exploring the environment and understanding the data structure.":"print(\"\\n\u2713 Ensemble prediction service restored successfully!\")"
  }
]