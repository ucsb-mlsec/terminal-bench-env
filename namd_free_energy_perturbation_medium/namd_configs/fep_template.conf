# NAMD Configuration File for Free Energy Perturbation (FEP) Calculations
# Template for alchemical transformations
# Modified by multiple researchers - USE WITH CAUTION

# Input files
coordinates     input.pdb
structure       input.psf
parameters      par_all36_prot.prm
paraTypeCharmm  on

# Basic simulation parameters
temperature     310
timestep        2.0
numsteps        15000

# Periodic boundary conditions
cellBasisVector1    50.0  0.0  0.0
cellBasisVector2     0.0 50.0  0.0
cellBasisVector3     0.0  0.0 50.0
cellOrigin           0.0  0.0  0.0
wrapAll             on

# Force field parameters
exclude             scaled1-4
1-4scaling          1.0
cutoff              12.0
switching           on
switchdist          10.0
pairlistdist        14.0

# PME for long-range electrostatics
PME                 on
PMEGridSpacing      1.0

# Temperature control
langevin            on
langevinDamping     1
langevinTemp        310
langevinHydrogen    off

# Pressure control
useGroupPressure    yes
useFlexibleCell     no
useConstantArea     no
langevinPiston      on
langevinPistonTarget  1.01325
langevinPistonPeriod  200.0
langevinPistonDecay   100.0
langevinPistonTemp    310

# Alchemical Free Energy Perturbation Setup
alch                on
alchType            FEP
alchFile            fep.pdb
alchCol             B
alchOutFile         fep_output.fepout
alchOutFreq         1000

# Lambda window configuration
alchLambda          0.5
alchLambda2         0.8

# Van der Waals decoupling schedule
alchVdwLambdaEnd    1.0
alchVdwShiftCoeff   0.0
alchDecouple        off

# Electrostatic decoupling schedule
alchElecLambdaStart 0.5
alchElecLambdaEnd   0.2

# Integration and output
rigidBonds          all
rigidTolerance      0.00001
rigidIterations     100
nonbondedFreq       1
fullElectFrequency  2
stepspercycle       10

# Output files
outputName          output
restartfreq         5000
dcdfreq             5000
xstFreq             1000
outputEnergies      1000
outputPressure      1000

# Run simulation
run                 15000