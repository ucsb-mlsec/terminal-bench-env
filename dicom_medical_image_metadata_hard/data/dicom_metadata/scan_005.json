[
  {
    "I need to analyze this task step by step:":"1. Read all JSON files from `\/data\/dicom_metadata\/`"
  },
  {
    "I need to analyze this task step by step:":"2. Validate each file against the requirements"
  },
  {
    "I need to analyze this task step by step:":"3. Count READY vs NEEDS_WORK files"
  },
  {
    "I need to analyze this task step by step:":"4. Write the report"
  },
  {
    "I need to analyze this task step by step:":"Let me create a Python script to accomplish this:"
  },
  {
    "I need to analyze this task step by step:":"```python"
  },
  {
    "I need to analyze this task step by step:":"import json"
  },
  {
    "I need to analyze this task step by step:":"import os"
  },
  {
    "I need to analyze this task step by step:":"import re"
  },
  {
    "I need to analyze this task step by step:":"def validate_dicom_metadata(metadata):"
  },
  {
    "I need to analyze this task step by step:":"    \"\"\"Validate a DICOM metadata dictionary against PACS requirements\"\"\""
  },
  {
    "I need to analyze this task step by step:":"    # Check Patient ID"
  },
  {
    "I need to analyze this task step by step:":"    if 'PatientID' not in metadata or not metadata['PatientID']:"
  },
  {
    "I need to analyze this task step by step:":"        return False"
  },
  {
    "I need to analyze this task step by step:":"    # Check Study Date"
  },
  {
    "I need to analyze this task step by step:":"    if 'StudyDate' not in metadata:"
  },
  {
    "I need to analyze this task step by step:":"        return False"
  },
  {
    "I need to analyze this task step by step:":"    study_date = metadata['StudyDate']"
  },
  {
    "I need to analyze this task step by step:":"    # Validate format YYYYMMDD"
  },
  {
    "I need to analyze this task step by step:":"        return False"
  },
  {
    "I need to analyze this task step by step:":"    # Check if year is 2020 or later"
  },
  {
    "I need to analyze this task step by step:":"    year = int(str(study_date)[:4])"
  },
  {
    "I need to analyze this task step by step:":"    if year < 2020:"
  },
  {
    "I need to analyze this task step by step:":"        return False"
  },
  {
    "I need to analyze this task step by step:":"    # Check Modality"
  },
  {
    "I need to analyze this task step by step:":"    if 'Modality' not in metadata:"
  },
  {
    "I need to analyze this task step by step:":"        return False"
  },
  {
    "I need to analyze this task step by step:":"    if metadata['Modality'] not in allowed_modalities:"
  },
  {
    "I need to analyze this task step by step:":"        return False"
  },
  {
    "I need to analyze this task step by step:":"    return True"
  },
  {
    "I need to analyze this task step by step:":"def main():"
  },
  {
    "I need to analyze this task step by step:":"    metadata_dir = '\/data\/dicom_metadata\/'"
  },
  {
    "I need to analyze this task step by step:":"    output_file = '\/solution\/quality_report.txt'"
  },
  {
    "I need to analyze this task step by step:":"    ready_count = 0"
  },
  {
    "I need to analyze this task step by step:":"    needs_work_count = 0"
  },
  {
    "I need to analyze this task step by step:":"    # Process all JSON files"
  },
  {
    "I need to analyze this task step by step:":"    for filename in os.listdir(metadata_dir):"
  },
  {
    "I need to analyze this task step by step:":"        if filename.endswith('.json'):"
  },
  {
    "I need to analyze this task step by step:":"            try:"
  },
  {
    "I need to analyze this task step by step:":"                    metadata = json.load(f)"
  },
  {
    "I need to analyze this task step by step:":"                if validate_dicom_metadata(metadata):"
  },
  {
    "I need to analyze this task step by step:":"                    ready_count += 1"
  },
  {
    "I need to analyze this task step by step:":"                else:"
  },
  {
    "I need to analyze this task step by step:":"                    needs_work_count += 1"
  },
  {
    "I need to analyze this task step by step:":"            except Exception as e:"
  },
  {
    "I need to analyze this task step by step:":"                needs_work_count += 1"
  },
  {
    "I need to analyze this task step by step:":"    # Write report"
  },
  {
    "I need to analyze this task step by step:":"        f.write(f'READY: {ready_count}\\n')"
  },
  {
    "I need to analyze this task step by step:":"        f.write(f'NEEDS_WORK: {needs_work_count}\\n')"
  },
  {
    "I need to analyze this task step by step:":"if __name__ == '__main__':"
  },
  {
    "I need to analyze this task step by step:":"    main()"
  },
  {
    "I need to analyze this task step by step:":"```"
  }
]