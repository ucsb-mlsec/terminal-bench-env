2024-01-15 10:23:45,123 INFO [werkzeug] _log:  * Running on http://0.0.0.0:5000/ (Press CTRL+C to quit)
2024-01-15 10:23:45,125 INFO [werkzeug] _log:  * Restarting with stat
2024-01-15 10:23:46,456 WARNING [werkzeug] _log:  * Debugger is active!
2024-01-15 10:23:46,458 INFO [werkzeug] _log:  * Debugger PIN: 123-456-789
2024-01-15 10:24:12,234 INFO [app] __init__: Flask application started successfully
2024-01-15 10:24:12,235 INFO [app] __init__: Loading configuration from environment variables
2024-01-15 10:24:12,236 INFO [app] __init__: DATABASE_HOST: db-postgres
2024-01-15 10:24:12,237 INFO [app] __init__: DATABASE_PORT: 5433
2024-01-15 10:24:12,238 INFO [app] __init__: DATABASE_NAME: apidb
2024-01-15 10:24:12,239 INFO [app] __init__: Attempting to establish database connection...
2024-01-15 10:24:15,456 ERROR [app] database: Failed to connect to database
Traceback (most recent call last):
  File "/app/database.py", line 45, in connect_db
    conn = psycopg2.connect(
  File "/usr/local/lib/python3.9/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: could not connect to server: Connection refused
	Is the server running on host "db-postgres" (172.18.0.2) and accepting
	TCP/IP connections on port 5433?
2024-01-15 10:24:15,458 WARNING [app] database: Retrying database connection (attempt 1/5)
2024-01-15 10:24:18,672 ERROR [app] database: Failed to connect to database
Traceback (most recent call last):
  File "/app/database.py", line 45, in connect_db
    conn = psycopg2.connect(
  File "/usr/local/lib/python3.9/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: could not connect to server: Connection refused
	Is the server running on host "db-postgres" (172.18.0.2) and accepting
	TCP/IP connections on port 5433?
2024-01-15 10:24:18,674 WARNING [app] database: Retrying database connection (attempt 2/5)
2024-01-15 10:24:21,889 ERROR [app] database: Failed to connect to database
Traceback (most recent call last):
  File "/app/database.py", line 45, in connect_db
    conn = psycopg2.connect(
  File "/usr/local/lib/python3.9/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: could not connect to server: Connection refused
	Is the server running on host "db-postgres" (172.18.0.2) and accepting
	TCP/IP connections on port 5433?
2024-01-15 10:24:21,891 WARNING [app] database: Retrying database connection (attempt 3/5)
2024-01-15 10:24:25,104 ERROR [app] database: Failed to connect to database
Traceback (most recent call last):
  File "/app/database.py", line 45, in connect_db
    conn = psycopg2.connect(
  File "/usr/local/lib/python3.9/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: could not connect to server: Connection refused
	Is the server running on host "db-postgres" (172.18.0.2) and accepting
	TCP/IP connections on port 5433?
2024-01-15 10:24:25,106 WARNING [app] database: Retrying database connection (attempt 4/5)
2024-01-15 10:24:28,321 ERROR [app] database: Failed to connect to database
Traceback (most recent call last):
  File "/app/database.py", line 45, in connect_db
    conn = psycopg2.connect(
  File "/usr/local/lib/python3.9/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: could not connect to server: Connection refused
	Is the server running on host "db-postgres" (172.18.0.2) and accepting
	TCP/IP connections on port 5433?
2024-01-15 10:24:28,323 WARNING [app] database: Retrying database connection (attempt 5/5)
2024-01-15 10:24:31,537 ERROR [app] database: Failed to connect to database after 5 attempts
Traceback (most recent call last):
  File "/app/database.py", line 45, in connect_db
    conn = psycopg2.connect(
  File "/usr/local/lib/python3.9/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: could not connect to server: Connection refused
	Is the server running on host "db-postgres" (172.18.0.2) and accepting
	TCP/IP connections on port 5433?
2024-01-15 10:24:31,540 CRITICAL [app] __init__: Database initialization failed - application cannot start
2024-01-15 10:25:15,678 INFO [werkzeug] _log: 172.18.0.1 - - [15/Jan/2024 10:25:15] "GET /health HTTP/1.1" 503 -
2024-01-15 10:25:15,680 ERROR [app] routes: Health check failed - database not connected
2024-01-15 10:26:42,891 INFO [werkzeug] _log: 172.18.0.1 - - [15/Jan/2024 10:26:42] "GET /api/users HTTP/1.1" 500 -
2024-01-15 10:26:42,893 ERROR [app] routes: Cannot process request - database connection unavailable
2024-01-15 10:27:18,234 INFO [werkzeug] _log: 172.18.0.1 - - [15/Jan/2024 10:27:18] "POST /api/users HTTP/1.1" 500 -
2024-01-15 10:27:18,236 ERROR [app] routes: Cannot create user - database connection unavailable
2024-01-15 10:28:05,567 INFO [app] __init__: Attempting database reconnection...
2024-01-15 10:28:08,782 ERROR [app] database: Failed to connect to database
Traceback (most recent call last):
  File "/app/database.py", line 45, in connect_db
    conn = psycopg2.connect(
  File "/usr/local/lib/python3.9/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: could not connect to server: Connection refused
	Is the server running on host "db-postgres" (172.18.0.2) and accepting
	TCP/IP connections on port 5433?
2024-01-15 10:28:08,784 ERROR [app] __init__: Database reconnection failed
2024-01-15 10:29:33,123 INFO [werkzeug] _log: 172.18.0.1 - - [15/Jan/2024 10:29:33] "GET /api/status HTTP/1.1" 503 -
2024-01-15 10:29:33,125 WARNING [app] routes: Service degraded - database unavailable