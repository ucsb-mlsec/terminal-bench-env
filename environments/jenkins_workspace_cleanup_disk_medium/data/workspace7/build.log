Started by user admin
Building in workspace /var/lib/jenkins/workspace/legacy-api-service
[legacy-api-service] $ /bin/sh -xe /tmp/jenkins8234567890123456789.sh
+ echo 'Starting build process for legacy-api-service'
Starting build process for legacy-api-service
[2023-09-15 08:23:45] INFO: Initializing build environment
[2023-09-15 08:23:45] INFO: Jenkins version 2.401.3
[2023-09-15 08:23:45] INFO: Java version 11.0.19
[2023-09-15 08:23:46] INFO: Maven version 3.9.1
[2023-09-15 08:23:46] INFO: Git version 2.39.2
[2023-09-15 08:23:47] INFO: Checking out source code from repository
[2023-09-15 08:23:47] INFO: Repository URL: https://github.com/company/legacy-api-service.git
[2023-09-15 08:23:47] INFO: Branch: master
[2023-09-15 08:23:48] Cloning repository...
[2023-09-15 08:23:49] Cloning into '/var/lib/jenkins/workspace/legacy-api-service'...
[2023-09-15 08:23:52] remote: Enumerating objects: 15847, done.
[2023-09-15 08:23:53] remote: Counting objects: 100% (15847/15847), done.
[2023-09-15 08:23:55] remote: Compressing objects: 100% (4521/4521), done.
[2023-09-15 08:24:01] remote: Total 15847 (delta 10234), reused 15201 (delta 9876)
[2023-09-15 08:24:02] Receiving objects: 100% (15847/15847), 45.23 MiB | 12.34 MiB/s, done.
[2023-09-15 08:24:05] Resolving deltas: 100% (10234/10234), done.
[2023-09-15 08:24:06] INFO: Checkout complete
[2023-09-15 08:24:06] INFO: Current commit: a8f3d9c2b1e4f7a6d5c8b9e2f1a4d7c6b5a8e9f2
[2023-09-15 08:24:07] INFO: Commit author: John Developer <john.dev@company.com>
[2023-09-15 08:24:07] INFO: Commit message: Fixed API authentication endpoint bug
[2023-09-15 08:24:08] INFO: Starting Maven build process
[2023-09-15 08:24:09] [INFO] Scanning for projects...
[2023-09-15 08:24:10] [INFO] 
[2023-09-15 08:24:10] [INFO] ----------------< com.company:legacy-api-service >-----------------
[2023-09-15 08:24:10] [INFO] Building legacy-api-service 2.5.3-SNAPSHOT
[2023-09-15 08:24:10] [INFO] --------------------------------[ jar ]---------------------------------
[2023-09-15 08:24:11] [INFO] 
[2023-09-15 08:24:11] [INFO] --- maven-clean-plugin:3.2.0:clean (default-clean) @ legacy-api-service ---
[2023-09-15 08:24:12] [INFO] Deleting /var/lib/jenkins/workspace/legacy-api-service/target
[2023-09-15 08:24:13] [INFO] 
[2023-09-15 08:24:13] [INFO] --- maven-resources-plugin:3.3.0:resources (default-resources) @ legacy-api-service ---
[2023-09-15 08:24:14] [INFO] Copying 47 resources
[2023-09-15 08:24:15] [INFO] Copying 23 resources
[2023-09-15 08:24:16] [INFO] 
[2023-09-15 08:24:16] [INFO] --- maven-compiler-plugin:3.10.1:compile (default-compile) @ legacy-api-service ---
[2023-09-15 08:24:17] [INFO] Changes detected - recompiling the module!
[2023-09-15 08:24:18] [INFO] Compiling 156 source files to /var/lib/jenkins/workspace/legacy-api-service/target/classes
[2023-09-15 08:24:22] [INFO] /var/lib/jenkins/workspace/legacy-api-service/src/main/java/com/company/api/controller/AuthController.java: Some input files use or override a deprecated API.
[2023-09-15 08:24:22] [INFO] /var/lib/jenkins/workspace/legacy-api-service/src/main/java/com/company/api/controller/AuthController.java: Recompile with -Xlint:deprecation for details.
[2023-09-15 08:24:28] [INFO] 
[2023-09-15 08:24:28] [INFO] --- maven-resources-plugin:3.3.0:testResources (default-testResources) @ legacy-api-service ---
[2023-09-15 08:24:29] [INFO] Copying 12 resources
[2023-09-15 08:24:30] [INFO] 
[2023-09-15 08:24:30] [INFO] --- maven-compiler-plugin:3.10.1:testCompile (default-testCompile) @ legacy-api-service ---
[2023-09-15 08:24:31] [INFO] Changes detected - recompiling the module!
[2023-09-15 08:24:32] [INFO] Compiling 89 source files to /var/lib/jenkins/workspace/legacy-api-service/target/test-classes
[2023-09-15 08:24:38] [INFO] 
[2023-09-15 08:24:38] [INFO] --- maven-surefire-plugin:2.22.2:test (default-test) @ legacy-api-service ---
[2023-09-15 08:24:39] [INFO] 
[2023-09-15 08:24:39] [INFO] -------------------------------------------------------
[2023-09-15 08:24:39] [INFO]  T E S T S
[2023-09-15 08:24:39] [INFO] -------------------------------------------------------
[2023-09-15 08:24:40] [INFO] Running com.company.api.controller.AuthControllerTest
[2023-09-15 08:24:42] [INFO] Tests run: 15, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.823 s - in com.company.api.controller.AuthControllerTest
[2023-09-15 08:24:42] [INFO] Running com.company.api.controller.UserControllerTest
[2023-09-15 08:24:44] [INFO] Tests run: 22, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.654 s - in com.company.api.controller.UserControllerTest
[2023-09-15 08:24:44] [INFO] Running com.company.api.service.AuthServiceTest
[2023-09-15 08:24:46] [INFO] Tests run: 18, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.432 s - in com.company.api.service.AuthServiceTest
[2023-09-15 08:24:46] [INFO] Running com.company.api.service.UserServiceTest
[2023-09-15 08:24:48] [INFO] Tests run: 25, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.876 s - in com.company.api.service.UserServiceTest
[2023-09-15 08:24:48] [INFO] Running com.company.api.repository.UserRepositoryTest
[2023-09-15 08:24:50] [INFO] Tests run: 12, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.234 s - in com.company.api.repository.UserRepositoryTest
[2023-09-15 08:24:50] [INFO] Running com.company.api.security.JwtTokenProviderTest
[2023-09-15 08:24:52] [INFO] Tests run: 16, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.567 s - in com.company.api.security.JwtTokenProviderTest
[2023-09-15 08:24:52] [INFO] Running com.company.api.security.SecurityConfigTest
[2023-09-15 08:24:54] [INFO] Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.098 s - in com.company.api.security.SecurityConfigTest
[2023-09-15 08:24:54] [INFO] Running com.company.api.util.ValidationUtilsTest
[2023-09-15 08:24:55] [INFO] Tests run: 14, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.876 s - in com.company.api.util.ValidationUtilsTest
[2023-09-15 08:24:55] [INFO] Running com.company.api.util.DateUtilsTest
[2023-09-15 08:24:56] [INFO] Tests run: 11, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.654 s - in com.company.api.util.DateUtilsTest
[2023-09-15 08:24:56] [INFO] Running com.company.api.config.DatabaseConfigTest
[2023-09-15 08:24:58] [INFO] Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.345 s - in com.company.api.config.DatabaseConfigTest
[2023-09-15 08:24:58] [INFO] Running com.company.api.config.CacheConfigTest
[2023-09-15 08:24:59] [INFO] Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.789 s - in com.company.api.config.CacheConfigTest
[2023-09-15 08:24:59] [INFO] Running com.company.api.exception.GlobalExceptionHandlerTest
[2023-09-15 08:25:01] [INFO] Tests run: 13, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.234 s - in com.company.api.exception.GlobalExceptionHandlerTest
[2023-09-15 08:25:01] [INFO] Running com.company.api.dto.UserDtoTest
[2023-09-15 08:25:02] [INFO] Tests run: 10, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.567 s - in com.company.api.dto.UserDtoTest
[2023-09-15 08:25:02] [INFO] Running com.company.api.dto.AuthRequestDtoTest
[2023-09-15 08:25:03] [INFO] Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.432 s - in com.company.api.dto.AuthRequestDtoTest
[2023-09-15 08:25:03] [INFO] Running com.company.api.integration.AuthIntegrationTest
[2023-09-15 08:25:06] [INFO] Tests run: 19, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.876 s - in com.company.api.integration.AuthIntegrationTest
[2023-09-15 08:25:06] [INFO] Running com.company.api.integration.UserIntegrationTest
[2023-09-15 08:25:09] [INFO] Tests run: 24, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 3.123 s - in com.company.api.integration.UserIntegrationTest
[2023-09-15 08:25:09] [INFO] 
[2023-09-15 08:25:09] [INFO] Results:
[2023-09-15 08:25:09] [INFO] 
[2023-09-15 08:25:09] [INFO] Tests run: 231, Failures: 0, Errors: 0, Skipped: 0
[2023-09-15 08:25:09] [INFO] 
[2023-09-15 08:25:10] [INFO] 
[2023-09-15 08:25:10] [INFO] --- maven-jar-plugin:3.3.0:jar (default-jar) @ legacy-api-service ---
[2023-09-15 08:25:11] [INFO] Building jar: /var/lib/jenkins/workspace/legacy-api-service/target/legacy-api-service-2.5.3-SNAPSHOT.jar
[2023-09-15 08:25:13] [INFO] 
[2023-09-15 08:25:13] [INFO] --- spring-boot-maven-plugin:2.7.14:repackage (repackage) @ legacy-api-service ---
[2023-09-15 08:25:14] [INFO] Replacing main artifact with repackaged archive
[2023-09-15 08:25:16] [INFO] 
[2023-09-15 08:25:16] [INFO] --- maven-install-plugin:3.1.0:install (default-install) @ legacy-api-service ---
[2023-09-15 08:25:17] [INFO] Installing /var/lib/jenkins/workspace/legacy-api-service/target/legacy-api-service-2.5.3-SNAPSHOT.jar to /var/lib/jenkins/.m2/repository/com/company/legacy-api-service/2.5.3-SNAPSHOT/legacy-api-service-2.5.3-SNAPSHOT.jar
[2023-09-15 08:25:18] [INFO] Installing /var/lib/jenkins/workspace/legacy-api-service/pom.xml to /var/lib/jenkins/.m2/repository/com/company/legacy-api-service/2.5.3-SNAPSHOT/legacy-api-service-2.5.3-SNAPSHOT.pom
[2023-09-15 08:25:18] [INFO] 
[2023-09-15 08:25:18] [INFO] --- jacoco-maven-plugin:0.8.10:report (report) @ legacy-api-service ---
[2023-09-15 08:25:19] [INFO] Loading execution data file /var/lib/jenkins/workspace/legacy-api-service/target/jacoco.exec
[2023-09-15 08:25:20] [INFO] Analyzed bundle 'legacy-api-service' with 156 classes
[2023-09-15 08:25:21] [INFO] 
[2023-09-15 08:25:21] [INFO] --- maven-checkstyle-plugin:3.2.2:check (validate) @ legacy-api-service ---
[2023-09-15 08:25:22] [INFO] Starting audit...
[2023-09-15 08:25:24] [INFO] Audit done.
[2023-09-15 08:25:24] [INFO] 
[2023-09-15 08:25:24] [INFO] --- maven-pmd-plugin:3.20.0:check (default) @ legacy-api-service ---
[2023-09-15 08:25:25] [INFO] PMD version: 6.55.0
[2023-09-15 08:25:28] [INFO] 
[2023-09-15 08:25:28] [INFO] ------------------------------------------------------------------------
[2023-09-15 08:25:28] [INFO] BUILD SUCCESS
[2023-09-15 08:25:28] [INFO] ------------------------------------------------------------------------
[2023-09-15 08:25:28] [INFO] Total time:  03:19 min
[2023-09-15 08:25:28] [INFO] Finished at: 2023-09-15T08:25:28Z
[2023-09-15 08:25:28] [INFO] ------------------------------------------------------------------------
[2023-09-15 08:25:29] INFO: Maven build completed successfully
[2023-09-15 08:25:29] INFO: Starting code quality analysis
[2023-09-15 08:25:30] INFO: Running SonarQube scanner
[2023-09-15 08:25:31] INFO: SonarQube Scanner 4.8.0.2856
[2023-09-15 08:25:31] INFO: Java 11.0.19 Oracle Corporation (64-bit)
[2023-09-15 08:25:31] INFO: Linux 5.15.0-78-generic amd64
[2023-09-15 08:25:32] INFO: User cache: /var/lib/jenkins/.sonar/cache
[2023-09-15 08:25:33] INFO: Analyzing on SonarQube server 9.9.1
[2023-09-15 08:25:34] INFO: Default locale: "en_US", source code encoding: "UTF-8"
[2023-09-15 08:25:35] INFO: Load global settings
[2023-09-15 08:25:37] INFO: Load global settings (done) | time=1234ms
[2023-09-15 08:25:37] INFO: Server id: 9CFC3560-AYjNEcBp4xMYkLWkKzYp
[2023-09-15 08:25:38] INFO: User cache: /var/lib/jenkins/.sonar/cache
[2023-09-15 08:25:39] INFO: Load/download plugins
[2023-09-15 08:25:41] INFO: Load plugins index
[2023-09-15 08:25:42] INFO: Load plugins index (done) | time=876ms
[2023-09-15 08:25:43] INFO: Load/download plugins (done) | time=2345ms
[2023-09-15 08:25:44] INFO: Process project properties
[2023-09-15 08:25:45] INFO: Execute project builders
[2023-09-15 08:25:46] INFO: Execute project builders (done) | time=567ms
[2023-09-15 08:25:47] INFO: Project key: com.company:legacy-api-service
[2023-09-15 08:25:48] INFO: Base dir: /var/lib/jenkins/workspace/legacy-api-service
[2023-09-15 08:25:49] INFO: Working dir: /var/lib/jenkins/workspace/legacy-api-service/target/sonar
[2023-09-15 08:25:50] INFO: Load project settings for component key: 'com.company:legacy-api-service'
[2023-09-15 08:25:52] INFO: Load project settings for component key: 'com.company:legacy-api-service' (done) | time=1234ms
[2023-09-15 08:25:53] INFO: Load quality profiles
[2023-09-15 08:25:55] INFO: Load quality profiles (done) | time=1876ms
[2023-09-15 08:25:56] INFO: Load active rules
[2023-09-15 08:26:02] INFO: Load active rules (done) | time=6234ms
[2023-09-15 08:26:03] INFO: Indexing files...
[2023-09-15 08:26:04] INFO: Project configuration:
[2023-09-15 08:26:05] INFO: 156 files indexed
[2023-09-15 08:26:06] INFO: 0 files ignored because of scm ignore settings
[2023-09-15 08:26:07] INFO: Quality profile for java: Sonar way
[2023-09-15 08:26:08] INFO: Quality profile for xml: Sonar way
[2023-09-15 08:26:09] INFO: ------------- Run sensors on module legacy-api-service
[2023-09-15 08:26:10] INFO: Sensor JavaSensor [java]
[2023-09-15 08:26:12] INFO: Configured Java source version (sonar.java.source): 11
[2023-09-15 08:26:13] INFO: JavaClasspath initialization
[2023-09-15 08:26:15] INFO: JavaClasspath initialization (done) | time=1567ms
[2023-09-15 08:26:16] INFO: JavaTestClasspath initialization
[2023-09-15 08:26:17] INFO: JavaTestClasspath initialization (done) | time=876ms
[2023-09-15 08:26:18] INFO: Server-side caching: read/write
[2023-09-15 08:26:19] INFO: Load project repositories
[2023-09-15 08:26:21] INFO: Load project repositories (done) | time=1234ms
[2023-09-15 08:26:22] INFO: Sensor JavaSensor [java] (done) | time=12345ms
[2023-09-15 08:26:23] INFO: Sensor JaCoCo XML Report Importer [jacoco]
[2023-09-15 08:26:25] INFO: Importing 1 report(s). Turn your logs in debug mode in order to see the exhaustive list.
[2023-09-15 08:26:27] INFO: Sensor JaCoCo XML Report Importer [jacoco] (done) | time=2345ms
[2023-09-15 08:26:28] INFO: Sensor CSS Rules [javascript]
[2023-09-15 08:26:29] INFO: No CSS, PHP, HTML or VueJS files are found in the project. CSS analysis is skipped.
[2023-09-15 08:26:30] INFO: Sensor CSS Rules [javascript] (done) | time=567ms
[2023-09-15 08:26:31] INFO: Sensor C# Project Type Information [csharp]
[2023-09-15 08:26:32] INFO: Sensor C# Project Type Information [csharp] (done) | time=234ms
[2023-09-15 08:26:33] INFO: Sensor C# Analysis Log [csharp]
[2023-09-15 08:26:34] INFO: Sensor C# Analysis Log [csharp] (done) | time=123ms
[2023-09-15 08:26:35] INFO: Sensor C# Properties [csharp]
[2023-09-15 08:26:36] INFO: Sensor C# Properties [csharp] (done) | time=234ms
[2023-09-15 08:26:37] INFO: Sensor HTML [web]
[2023-09-15 08:26:38] INFO: Sensor HTML [web] (done) | time=345ms
[2023-09-15 08:26:39] INFO: Sensor XML Sensor [xml]
[2023-09-15 08:26:41] INFO: 12 source files to be analyzed
[2023-09-15 08:26:43] INFO: Sensor XML Sensor [xml] (done) | time=1876ms
[2023-09-15 08:26:44] INFO: Sensor TextAndSecretsSensor [text]
[2023-09-15 08:26:46] INFO: 168 source files to be analyzed
[2023-09-15 08:26:49] INFO: 168/168 source files have been analyzed
[2023-09-15 08:26:50] INFO: Sensor TextAndSecretsSensor [text] (done) | time=3456ms
[2023-09-15 08:26:51] INFO: ------------- Run sensors on project
[2023-09-15 08:26:52] INFO: Sensor Zero Coverage Sensor
[2023-09-15 08:26:53] INFO: Sensor Zero Coverage Sensor (done) | time=567ms
[2023-09-15 08:26:54] INFO: Sensor Java CPD Block Indexer
[2023-09-15 08:26:56] INFO: Sensor Java CPD Block Indexer (done) | time=1234ms
[2023-09-15 08:26:57] INFO: CPD Executor 2 files had no CPD blocks
[2023-09-15 08:26:58] INFO: CPD Executor Calculating CPD for 154 files
[2023-09-15 08:27:01] INFO: CPD Executor CPD calculation finished (done) | time=2876ms
[2023-09-15 08:27:02] INFO: Analysis report generated in 234ms, dir size=2.1 MB
[2023-09-15 08:27:03] INFO: Analysis report compressed in 456ms, zip size=678 KB
[2023-09-15 08:27:04] INFO: Analysis report uploaded in 789ms
[2023-09-15 08:27:05] INFO: ANALYSIS SUCCESSFUL, you can browse https://sonarqube.company.com/dashboard?id=com.company%3Alegacy-api-service
[2023-09-15 08:27:06] INFO: Note that you will be able to access the updated dashboard once the server has processed the submitted analysis report
[2023-09-15 08:27:07] INFO: More about the report processing at https://sonarqube.company.com/api/ce/task?id=AYjNEcBp4xMYkLWkKzYp
[2023-09-15 08:27:08] INFO: Analysis total time: 1:42.345 s
[2023-09-15 08:27:09] INFO: ------------------------------------------------------------------------
[2023-09-15 08:27:09] INFO: EXECUTION SUCCESS
[2023-09-15 08:27:09] INFO: ------------------------------------------------------------------------
[2023-09-15 08:27:10] INFO: Total time: 1:44.567s
[2023-09-15 08:27:10] INFO: Final Memory: 89M/256M
[2023-09-15 08:27:10] INFO: ------------------------------------------------------------------------
[2023-09-15 08:27:11] INFO: Code quality analysis completed successfully
[2023-09-15 08:27:12] INFO: Quality Gate Status: PASSED
[2023-09-15 08:27:13] INFO: Code Coverage: 87.3%
[2023-09-15 08:27:14] INFO: Bugs: 0
[2023-09-15 08:27:15] INFO: Vulnerabilities: 0
[2023-09-15 08:27:16] INFO: Code Smells: 23
[2023-09-15 08:27:17] INFO: Technical Debt: 2h 15min
[2023-09-15 08:27:18] INFO: Duplicated Lines: 1.2%
[2023-09-15 08:27:19] INFO: Starting Docker image build
[2023-09-15 08:27:20] + docker build -t legacy-api-service:2.5.3-SNAPSHOT .
[2023-09-15 08:27:21] Sending build context to Docker daemon  78.54MB
[2023-09-15 08:27:22] Step 1/12 : FROM openjdk:11-jre-slim
[2023-09-15 08:27:23] 11-jre-slim: Pulling from library/openjdk
[2023-09-15 08:27:24] a2abf6c4d29d: Pulling fs layer
[2023-09-15 08:27:25] 38e0b9de9cc8: Pulling fs layer
[2023-09-15 08:27:26] 5f2e0e0f5dc3: Pulling fs layer
[2023-09-15 08:27:28] a2abf6c4d29d: Verifying Checksum
[2023-09-15 08:27:29] a2abf6c4d29d: Download complete
[2023-09-15 08:27:31] a2abf6c4d29d: Pull complete
[2023-09-15 08:27:33] 38e0b9de9cc8: Verifying Checksum
[2023-09-15 08:27:34] 38e0b9de9cc8: Download complete
[2023-09-15 08:27:36] 38e0b9de9cc8: Pull complete
[2023-09-15 08:27:38] 5f2e0e0f5dc3: Verifying Checksum
[2023-09-15 08:27:39] 5f2e0e0f5dc3: Download complete
[2023-09-15 08:27:41] 5f2e0e0f5dc3: Pull complete
[2023-09-15 08:27:42] Digest: sha256:7d9e4e3e4e8e0d7c6b5a4f3e2d1c0b9a8e7d6c5b4a3f2e1d0c9b8a7e6d5c4b3a
[2023-09-15 08:27:43] Status: Downloaded newer image for openjdk:11-jre-slim
[2023-09-15 08:27:44]  ---> 7d9e4e3e4e8e
[2023-09-15 08:27:45] Step 2/12 : WORKDIR /app
[2023-09-15 08:27:46]  ---> Running in 1a2b3c4d5e6f
[2023-09-15 08:27:47] Removing intermediate container 1a2b3c4d5e6f
[2023-09-15 08:27:48]  ---> 2b3c4d5e6f7a
[2023-09-15 08:27:49] Step 3/12 : COPY target/legacy-api-service-2.5.3-SNAPSHOT.jar app.jar
[2023-09-15 08:27:51]  ---> 3c4d5e6f7a8b
[2023-09-15 08:27:52] Step 4/12 : COPY src/main/resources/application.yml application.yml
[2023-09-15 08:27:53]  ---> 4d5e6f7a8b9c
[2023-09-15 08:27:54] Step 5/12 : EXPOSE 8080
[2023-09-15 08:27:55]  ---> Running in 5e6f7a8b9c0d
[2023-09-15 08:27:56] Removing intermediate container 5e6f7a8b9c0d
[2023-09-15 08:27:57]  ---> 6f7a8b9c0d1e
[2023-09-15 08:27:58] Step 6/12 : ENV JAVA_OPTS="-Xmx512m -Xms256m"
[2023-09-15 08:27:59]  ---> Running in 7a8b9c0d1e2f
[2023-09-15 08:28:00] Removing intermediate container 7a8b9c0d1e2f
[2023-09-15 08:28:01]  ---> 8b9c0d1e2f3a
[2023-09-15 08:28:02] Step 7/12 : ENV SPRING_PROFILES_ACTIVE=production
[2023-09-15 08:28:03]  ---> Running in 9c0d1e2f3a4b
[2023-09-15 08:28:04] Removing intermediate container 9c0d1e2f3a4b
[2023-09-15 08:28:05]  ---> 0d1e2f3a4b5c
[2023-09-15 08:28:06] Step 8/12 : RUN groupadd -r appuser && useradd -r -g appuser appuser
[2023-09-15 08:28:07]  ---> Running in 1e2f3a4b5c6d
[2023-09-15 08:28:08] Removing intermediate container 1e2f3a4b5c6d
[2023-09-15 08:28:09]  ---> 2f3a4b5c6d7e
[2023-09-15 08:28:10] Step 9/12 : RUN chown -R appuser:appuser /app
[2023-09-15 08:28:11]  ---> Running in 3a4b5c6d7e8f
[2023-09-15 08:28:12] Removing intermediate container 3a4b5c6d7e8f
[2023-09-15 08:28:13]  ---> 4b5c6d7e8f9a
[2023-09-15 08:28:14] Step 10/12 : USER appuser
[2023-09-15 08:28:15]  ---> Running in 5c6d7e8f9a0b
[2023-09-15 08:28:16] Removing intermediate container 5c6d7e8f9a0b
[2023-09-15 08:28:17]  ---> 6d7e8f9a0b1c
[2023-09-15 08:28:18] Step 11/12 : HEALTHCHECK --interval=30s --timeout=3s CMD curl -f http://localhost:8080/actuator/health || exit 1
[2023-09-15 08:28:19]  ---> Running in 7e8f9a0b1c2d
[2023-09-15 08:28:20] Removing intermediate container 7e8f9a0b1c2d
[2023-09-15 08:28:21]  ---> 8f9a0b1c2d3e
[2023-09-15 08:28:22] Step 12/12 : ENTRYPOINT ["java", "-jar", "app.jar"]
[2023-09-15 08:28:23]  ---> Running in 9a0b1c2d3e4f
[2023-09-15 08:28:24] Removing intermediate container 9a0b1c2d3e4f
[2023-09-15 08:28:25]  ---> 0b1c2d3e4f5a
[2023-09-15 08:28:26] Successfully built 0b1c2d3e4f5a
[2023-09-15 08:28:27] Successfully tagged legacy-api-service:2.5.3-SNAPSHOT
[2023-09-15 08:28:28] INFO: Docker image build completed successfully
[2023-09-15 08:28:29] INFO: Image ID: 0b1c2d3e4f5a
[2023-09-15 08:28:30] INFO: Image Size: 256 MB
[2023-09-15 08:28:31] INFO: Running container security scan
[2023-09-15 08:28:32] + trivy image legacy-api-service:2.5.3-SNAPSHOT
[2023-09-15 08:28:34] 2023-09-15T08:28:34.123+0000    INFO    Vulnerability scanning is enabled
[2023-09-15 08:28:35] 2023-09-15T08:28:35.456+0000    INFO    Secret scanning is enabled
[2023-09-15 08:28:36] 2023-09-15T08:28:36.789+0000    INFO    If your scanning is slow, please try '--scanners vuln' to disable secret scanning
[2023-09-15 08:28:37] 2023-09-15T08:28:37.012+0000    INFO    Please see also https://aquasecurity.github.io/trivy/v0.44/docs/scanner/secret/#recommendation for faster secret detection
[2023-09-15 08:28:39] 2023-09-15T08:28:39.345+0000    INFO    Detected OS: debian
[2023-09-15 08:28:40] 2023-09-15T08:28:40.678+0000    INFO    Detecting Debian vulnerabilities...
[2023-09-15 08:28:42] 2023-09-15T08:28:42.901+0000    INFO    Number of language-specific files: 1
[2023-09-15 08:28:43] 2023-09-15T08:28:43.234+0000    INFO    Detecting jar vulnerabilities...
[2023-09-15 08:28:45] 
[2023-09-15 08:28:45] legacy-api-service:2.5.3-SNAPSHOT (debian 11.7)
[2023-09-15 08:28:46] 
[2023-09-15 08:28:46] Total: 0 (UNKNOWN: 0, LOW: 0, MEDIUM: 0, HIGH: 0, CRITICAL: 0)
[2023-09-15 08:28:47] 
[2023-09-15 08:28:47] Java (jar)
[2023-09-15 08:28:48] 
[2023-09-15 08:28:48] Total: 0 (UNKNOWN: 0, LOW: 0, MEDIUM: 0, HIGH: 0, CRITICAL: 0)
[2023-09-15 08:28:49] 
[2023-09-15 08:28:50] INFO: Security scan completed - No vulnerabilities found
[2023-09-15 08:28:51] INFO: Pushing Docker image to registry
[2023-09-15 08:28:52] + docker tag legacy-api-service:2.5.3-SNAPSHOT registry.company.com/legacy-api-service:2.5.3-SNAPSHOT
[2023-09-15 08:28:53] + docker push registry.company.com/legacy-api-service:2.5.3-SNAPSHOT
[2023-09-15 08:28:54] The push refers to repository [registry.company.com/legacy-api-service]
[2023-09-15 08:28:56] 5f70bf18a086: Preparing
[2023-09-15 08:28:57] 38e0b9de9cc8: Preparing
[2023-09-15 08:28:58] a2abf6c4d29d: Preparing
[2023-09-15 08:29:00] 5f70bf18a086: Pushed
[2023-09-15 08:29:02] 38e0b9de9cc8: Pushed
[2023-09-15 08:29:05] a2abf6c4d29d: Pushed
[2023-09-15 08:29:07] 2.5.3-SNAPSHOT: digest: sha256:1c2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d size: 1573
[2023-09-15 08:29:08] INFO: Docker image pushed successfully to registry
[2023-09-15 08:29:09] INFO: Cleaning up workspace
[2023-09-15 08:29:10] + rm -rf target/classes
[2023-09-15 08:29:11] + rm -rf target/test-classes
[2023-09-15 08:29:12] INFO: Workspace cleanup completed
[2023-09-15 08:29:13] INFO: Generating build artifacts
[2023-09-15 08:29:14] INFO: Archiving artifacts: target/*.jar
[2023-09-15 08:29:15] Archiving artifacts
[2023-09-15 08:29:16] Recording fingerprints
[2023-09-15 08:29:17] INFO: Publishing test results
[2023-09-15 08:29:18] Recording test results
[2023-09-15 08:29:19] [Checks API] No suitable checks publisher found.
[2023-09-15 08:29:20] INFO: Publishing code coverage reports
[2023-09-15 08:29:21] [JaCoCo plugin] Collecting JaCoCo coverage data...
[2023-09-15 08:29:22] [JaCoCo plugin] **/**.exec;**/classes;**/src/main/java
[2023-09-15 08:29:23] [JaCoCo plugin] Loading inclusions files..
[2023-09-15 08:29:24] [JaCoCo plugin] inclusions: []
[2023-09-15 08:29:25] [JaCoCo plugin] exclusions: []
[2023-09-15 08:29:26] [JaCoCo plugin] Thresholds: JacocoHealthReportThresholds [minClass=0, maxClass=0, minMethod=0, maxMethod=0, minLine=0, maxLine=0, minBranch=0, maxBranch=0, minInstruction=0, maxInstruction=0, minComplexity=0, maxComplexity=0]
[2023-09-15 08:29:27] [JaCoCo plugin] Publishing the results..
[2023-09-15 08:29:28] [JaCoCo plugin] Loading packages..
[2023-09-15 08:29:29] [JaCoCo plugin] Done.
[2023-09-15 08:29:30] [JaCoCo plugin] Overall coverage: class: 87.3%, method: 85.6%, line: 89.2%, branch: 82.4%, instruction: 88.7%
[2023-09-15 08:29:31] INFO: Sending build notifications
[2023-09-15 08:29:32] INFO: Email notification sent to dev-team@company.com
[2023-09-15 08:29:33] INFO: Slack notification sent to #builds channel
[2023-09-15 08:29:34] INFO: Build summary:
[2023-09-15 08:29:35] INFO: - Build Duration: 6 minutes 10 seconds
[2023-09-15 08:29:36] INFO: - Total Tests: 231
[2023-09-15 08:29:37] INFO: - Test Failures: 0
[2023-09-15 08:29:38] INFO: - Code Coverage: 87.3%
[2023-09-15 08:29:39] INFO: - Quality Gate: PASSED
[2023-09-15 08:29:40] INFO: - Docker Image: registry.company.com/legacy-api-service:2.5.3-SNAPSHOT
[2023-09-15 08:29:41] INFO: - Artifact Size: 45.2 MB
[2023-09-15 08:29:42] Finished: SUCCESS