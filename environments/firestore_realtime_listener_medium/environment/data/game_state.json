[
  {
    "#!\/usr\/bin\/env python3":"\"\nGame Server Player Monitoring Service\nWatches game_state.json for changes and logs player counts\n\""
  },
  {
    "#!\/usr\/bin\/env python3":"import json"
  },
  {
    "#!\/usr\/bin\/env python3":"import time"
  },
  {
    "#!\/usr\/bin\/env python3":"import os"
  },
  {
    "#!\/usr\/bin\/env python3":"from datetime import datetime"
  },
  {
    "#!\/usr\/bin\/env python3":"from pathlib import Path"
  },
  {
    "#!\/usr\/bin\/env python3":"GAME_STATE_FILE = \"\/workspace\/game_state.json\""
  },
  {
    "#!\/usr\/bin\/env python3":"LOG_FILE = \"\/workspace\/player_log.txt\""
  },
  {
    "#!\/usr\/bin\/env python3":"CHECK_INTERVAL = 0.5  # Check every 0.5 seconds for responsiveness"
  },
  {
    "#!\/usr\/bin\/env python3":"def get_file_mtime(filepath):"
  },
  {
    "#!\/usr\/bin\/env python3":"    \"\"\"Get the modification time of a file\"\"\""
  },
  {
    "#!\/usr\/bin\/env python3":"    try:"
  },
  {
    "#!\/usr\/bin\/env python3":"        return os.path.getmtime(filepath)"
  },
  {
    "#!\/usr\/bin\/env python3":"    except FileNotFoundError:"
  },
  {
    "#!\/usr\/bin\/env python3":"        return None"
  },
  {
    "#!\/usr\/bin\/env python3":"def read_player_count(filepath):"
  },
  {
    "#!\/usr\/bin\/env python3":"    \"\"\"Read the game state file and return player count and timestamp\"\"\""
  },
  {
    "#!\/usr\/bin\/env python3":"    try:"
  },
  {
    "#!\/usr\/bin\/env python3":"            data = json.load(f)"
  },
  {
    "#!\/usr\/bin\/env python3":"        print(f\"Error reading game state: {e}\")"
  },
  {
    "#!\/usr\/bin\/env python3":"    \"\"\"Append player count observation to log file\"\"\""
  },
  {
    "#!\/usr\/bin\/env python3":"    try:"
  },
  {
    "#!\/usr\/bin\/env python3":"            f.write(f\"{timestamp} {count}\\n\")"
  },
  {
    "#!\/usr\/bin\/env python3":"        print(f\"Logged: {timestamp} {count}\")"
  },
  {
    "#!\/usr\/bin\/env python3":"    except Exception as e:"
  },
  {
    "#!\/usr\/bin\/env python3":"        print(f\"Error writing to log: {e}\")"
  },
  {
    "#!\/usr\/bin\/env python3":"def monitor_game_state():"
  },
  {
    "#!\/usr\/bin\/env python3":"    \"\"\"Main monitoring loop\"\"\""
  },
  {
    "#!\/usr\/bin\/env python3":"    print(f\"Starting game state monitor...\")"
  },
  {
    "#!\/usr\/bin\/env python3":"    print(f\"Watching: {GAME_STATE_FILE}\")"
  },
  {
    "#!\/usr\/bin\/env python3":"    print(f\"Logging to: {LOG_FILE}\")"
  },
  {
    "#!\/usr\/bin\/env python3":"    print(\"Press Ctrl+C to stop\")"
  },
  {
    "#!\/usr\/bin\/env python3":"    # Initialize tracking"
  },
  {
    "#!\/usr\/bin\/env python3":"    last_mtime = None"
  },
  {
    "#!\/usr\/bin\/env python3":"    # Read initial state"
  },
  {
    "#!\/usr\/bin\/env python3":"    if os.path.exists(GAME_STATE_FILE):"
  },
  {
    "#!\/usr\/bin\/env python3":"        if timestamp is not None and count is not None:"
  },
  {
    "#!\/usr\/bin\/env python3":"            last_mtime = get_file_mtime(GAME_STATE_FILE)"
  },
  {
    "#!\/usr\/bin\/env python3":"    try:"
  },
  {
    "#!\/usr\/bin\/env python3":"        while True:"
  },
  {
    "#!\/usr\/bin\/env python3":"            # Check if file has been modified"
  },
  {
    "#!\/usr\/bin\/env python3":"            current_mtime = get_file_mtime(GAME_STATE_FILE)"
  },
  {
    "#!\/usr\/bin\/env python3":"            if current_mtime is not None and current_mtime != last_mtime:"
  },
  {
    "#!\/usr\/bin\/env python3":"                if timestamp is not None and count is not None:"
  },
  {
    "#!\/usr\/bin\/env python3":"                    last_mtime = current_mtime"
  },
  {
    "#!\/usr\/bin\/env python3":"            # Wait before next check"
  },
  {
    "#!\/usr\/bin\/env python3":"            time.sleep(CHECK_INTERVAL)"
  },
  {
    "#!\/usr\/bin\/env python3":"    except KeyboardInterrupt:"
  },
  {
    "#!\/usr\/bin\/env python3":"        print(\"\\nMonitoring stopped by user\")"
  },
  {
    "#!\/usr\/bin\/env python3":"    except Exception as e:"
  },
  {
    "#!\/usr\/bin\/env python3":"        print(f\"Unexpected error: {e}\")"
  },
  {
    "#!\/usr\/bin\/env python3":"    finally:"
  },
  {
    "#!\/usr\/bin\/env python3":"        print(\"Monitor service shutdown complete\")"
  },
  {
    "#!\/usr\/bin\/env python3":"if __name__ == \"__main__\":"
  },
  {
    "#!\/usr\/bin\/env python3":"    monitor_game_state()"
  }
]