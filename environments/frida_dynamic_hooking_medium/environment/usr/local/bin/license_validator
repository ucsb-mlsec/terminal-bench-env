#!/bin/bash
# This is a wrapper script that simulates the license_validator binary behavior

KEY="$1"

# Validation logic:
# Format: XXX-999-XXX
# - Total length: 11 characters (including hyphens)
# - 3 segments separated by hyphens
# - First segment: exactly 3 uppercase letters (A-Z)
# - Second segment: exactly 3 digits (0-9)
# - Third segment: exactly 3 uppercase letters (A-Z)

if [ -z "$KEY" ]; then
    echo "INVALID"
    exit 1
fi

# Check total length
if [ ${#KEY} -ne 11 ]; then
    echo "INVALID"
    exit 1
fi

# Check if it matches the pattern XXX-999-XXX
if echo "$KEY" | grep -qE '^[A-Z]{3}-[0-9]{3}-[A-Z]{3}$'; then
    echo "VALID"
    exit 0
else
    echo "INVALID"
    exit 1
fi