# Spark Configuration File - Sales Data Pipeline
# WARNING: This configuration has known partition pruning issues

spark.app.name SalesDataPipeline
spark.master yarn
spark.executor.memory 4g
spark.driver.memory 2g
spark.executor.cores 4
spark.sql.shuffle.partitions 200

# Partition-related settings (PROBLEMATIC)
spark.sql.sources.partitionOverwriteMode static
spark.sql.optimizer.dynamicPartitionPruning.enabled false
spark.sql.hive.metastorePartitionPruning false
spark.sql.optimizer.pruneFilters false
spark.sql.statistics.histogram.enabled false
spark.sql.cbo.enabled false
spark.sql.adaptive.enabled false
spark.sql.optimizer.dynamicPartitionPruning.reuseBroadcastOnly false

# General SQL settings
spark.sql.autoBroadcastJoinThreshold 10485760
spark.sql.files.maxPartitionBytes 134217728
spark.sql.adaptive.coalescePartitions.enabled true

# Serialization
spark.serializer org.apache.spark.serializer.KryoSerializer
spark.kryoserializer.buffer.max 512m

# Memory management
spark.memory.fraction 0.6
spark.memory.storageFraction 0.5

# Network timeout
spark.network.timeout 300s
spark.executor.heartbeatInterval 60s