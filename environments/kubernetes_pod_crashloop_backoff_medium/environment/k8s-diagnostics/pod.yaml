apiVersion: v1
kind: Pod
metadata:
  name: webapp-pod
  namespace: production
  labels:
    app: webapp
    version: v1.2.3
spec:
  containers:
  - name: webapp
    image: python-webapp:1.2.3
    ports:
    - containerPort: 8080
      protocol: TCP
    env:
    - name: DATABASE_URL
      value: "postgresql://user:password@postgres-service:5432/appdb"
    - name: REDIS_HOST
      value: "redis-service"
    - name: REDIS_PORT
      value: "6379"
    - name: APP_CONFIG
      valueFrom:
        configMapKeyRef:
          name: webapp-config
          key: app.conf
    resources:
      requests:
        memory: "256Mi"
        cpu: "250m"
      limits:
        memory: "512Mi"
        cpu: "500m"
    livenessProbe:
      httpGet:
        path: /health
        port: 8080
      initialDelaySeconds: 30
      periodSeconds: 10
      timeoutSeconds: 5
      failureThreshold: 3
    readinessProbe:
      httpGet:
        path: /health
        port: 8000
      initialDelaySeconds: 10
      periodSeconds: 5
      timeoutSeconds: 3
      failureThreshold: 3
  restartPolicy: Always