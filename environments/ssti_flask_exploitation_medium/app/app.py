#!/usr/bin/env python3

from flask import Flask, render_template, request, render_template_string

app = Flask(__name__)

employees = [
    {"name": "Alice Johnson", "department": "Engineering", "email": "alice.johnson@company.com", "phone": "555-0101"},
    {"name": "Bob Smith", "department": "Marketing", "email": "bob.smith@company.com", "phone": "555-0102"},
    {"name": "Carol Williams", "department": "Engineering", "email": "carol.williams@company.com", "phone": "555-0103"},
    {"name": "David Brown", "department": "Sales", "email": "david.brown@company.com", "phone": "555-0104"},
    {"name": "Eve Davis", "department": "HR", "email": "eve.davis@company.com", "phone": "555-0105"},
    {"name": "Frank Miller", "department": "Engineering", "email": "frank.miller@company.com", "phone": "555-0106"},
    {"name": "Grace Wilson", "department": "Finance", "email": "grace.wilson@company.com", "phone": "555-0107"},
    {"name": "Henry Moore", "department": "Sales", "email": "henry.moore@company.com", "phone": "555-0108"}
]

@app.route('/')
def index():
    return render_template('search.html')

@app.route('/search', methods=['POST'])
def search():
    query = request.form.get('query', '')
    
    results = []
    if query:
        for emp in employees:
            if query.lower() in emp['name'].lower():
                results.append(emp)
    
    template = '''
    <!DOCTYPE html>
    <html>
    <head>
        <title>Search Results</title>
        <style>
            body { font-family: Arial, sans-serif; margin: 40px; }
            h1 { color: #333; }
            .result { border: 1px solid #ddd; padding: 15px; margin: 10px 0; border-radius: 5px; }
            .back { margin-top: 20px; }
            a { color: #0066cc; text-decoration: none; }
            a:hover { text-decoration: underline; }
        </style>
    </head>
    <body>
        <h1>Search Results for: ''' + query + '''</h1>
        <p>Found {{ results|length }} employee(s)</p>
        {% for emp in results %}
        <div class="result">
            <strong>{{ emp.name }}</strong><br>
            Department: {{ emp.department }}<br>
            Email: {{ emp.email }}<br>
            Phone: {{ emp.phone }}
        </div>
        {% endfor %}
        {% if results|length == 0 %}
        <p>No employees found matching your search.</p>
        {% endif %}
        <div class="back">
            <a href="/">Back to Search</a>
        </div>
    </body>
    </html>
    '''
    
    return render_template_string(template, results=results)

if __name__ == '__main__':
    app.run(debug=False, host='0.0.0.0', port=5000)