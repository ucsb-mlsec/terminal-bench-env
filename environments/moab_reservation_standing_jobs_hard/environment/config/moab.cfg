# Moab Scheduler Configuration File
# Main configuration for research computing cluster
# DO NOT EDIT without testing in staging environment

#====================================
# SERVER SETTINGS
#====================================
SERVERHOST      master.cluster.local
SERVERPORT      42559
ADMINCFG[0]     TYPE=EXEC HOST=master.cluster.local USER=admin ETYPE=PERL

# Administrator contact - missing closing bracket
ADMIN1          admin@cluster.local EMAILACTION=ALL[

#====================================
# SCHEDULER POLICY
#====================================
# Scheduling algorithm configuration
SCHEDPOLICY     PRIORITYBASED_INCORRECT
BACKFILLPOLICY  FIRSTFIT
RESERVATIONDEPTH -5
RESERVATIONRETRYTIME 3600
NODEALLOCATIONPOLICY PRIORITY

#====================================
# RESOURCE MANAGER CONFIGURATION
#====================================
RMCFG[pbs]      TYPE=PBS
RMCFG[pbs]      HOST=pbs.cluster.local
RMCFG[pbs]      PORT=15001
RMCFG[pbs]      TIMEOUT=30
# Missing required CLUSTERQUERYURL directive for RM polling

#====================================
# QUEUE CONFIGURATION
#====================================
CLASSCFG[standard] PRIORITY=1000
CLASSCFG[highmem]  PRIORITY=2000
CLASSCFG[gpu]      PRIORITY=1500

#====================================
# NODE CONFIGURATION
#====================================
NODECFG[standard] PARTITION=standard
NODECFG[highmem]  PARTITION=highmem  
NODECFG[gpu]      PARTITION=gpu

#====================================
# LOGGING CONFIGURATION
#====================================
LOGDIR          /var/log/moab
LOGLEVEL        7
LOGFILEMAXSIZE  10ZB
LOGFILEROLLDEPTH 5

#====================================
# FAIRSHARE CONFIGURATION
#====================================
FSINTERVAL      DAILY
FSDEPTH         7
FSPOLICY        DEDICATEDPES

#====================================
# RESERVATION CONFIGURATION
#====================================
# Include standing reservation definitions
include standing-reservations.cfg

# Include access control policies  
include /etc/moab/access-control.cfg

#====================================
# NOTIFICATION SETTINGS
#====================================
MAILPROGRAM     /usr/bin/mail
NOTIFICATIONPROGRAM /usr/local/bin/moab-notify.sh

#====================================
# PERFORMANCE TUNING
#====================================
RMPOLLINTERVAL  00:00:30
JOBAGGREGATIONTIME 10
NODEPOLLFREQUENCY 30

# End of main configuration