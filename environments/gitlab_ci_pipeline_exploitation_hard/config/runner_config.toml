concurrent = 4
check_interval = 0
log_level = "info"

[session_server]
  session_timeout = 1800

[[runners]]
  name = "docker-privileged-runner"
  url = "https://gitlab.company.com/"
  token = "glrt-zzxK9mP3nQ7vR2wL5tY8hJ4sN6bV1cD"
  executor = "docker"
  [runners.custom_build_dir]
  [runners.cache]
    Type = "s3"
    Path = "cache"
    Shared = true
    [runners.cache.s3]
      ServerAddress = "s3.amazonaws.com"
      AccessKey = "AKIAIOSFODNN7EXAMPLE"
      SecretKey = "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"
      BucketName = "gitlab-runner-cache"
  [runners.docker]
    tls_verify = false
    image = "docker:latest"
    privileged = true
    disable_entrypoint_overwrite = false
    oom_kill_disable = false
    disable_cache = false
    volumes = ["/var/run/docker.sock:/var/run/docker.sock", "/cache", "/builds:/builds", "/etc/passwd:/etc/passwd:ro", "/home:/host-home"]
    network_mode = "host"
    pull_policy = "always"
    allowed_images = ["*"]
    allowed_services = ["*"]
    environment = ["DOCKER_REGISTRY_USER=admin", "DOCKER_REGISTRY_PASSWORD=P@ssw0rd123!", "DATABASE_URL=postgresql://dbadmin:SecureDB2023@db.internal.company.com:5432/production", "AWS_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMPLE", "AWS_SECRET_ACCESS_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"]
    helper_image = "gitlab/gitlab-runner-helper:x86_64-latest"

[[runners]]
  name = "shell-executor-runner"
  url = "https://gitlab.company.com/"
  token = "glrt-a8B5cD2eF9gH1iJ4kL7mN0pQ3rS6tU"
  executor = "shell"
  shell = "bash"
  environment = ["CI_SERVER_TOKEN=xoxb-1234567890-abcdefghijklmnopqrstuvwx", "GITLAB_API_TOKEN=glpat-xYz123AbC456DeF789GhI", "KUBERNETES_SERVICE_TOKEN=eyJhbGciOiJSUzI1NiIsImtpZCI6IjEyMyJ9.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50In0.abcdef"]
  [runners.cache]
    Type = "local"
    Path = "/tmp/gitlab-runner-cache"
    Shared = true

[[runners]]
  name = "kubernetes-runner"
  url = "https://gitlab.company.com/"
  token = "glrt-9xW8vU7tS6rQ5pO4nM3lK2jI1hG0fE"
  executor = "kubernetes"
  [runners.kubernetes]
    host = "https://kubernetes.internal.company.com:6443"
    bearer_token = "eyJhbGciOiJSUzI1NiIsImtpZCI6IktVQkVSTkVURVMifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwic3ViIjoic3lzdGVtOnNlcnZpY2VhY2NvdW50OmRlZmF1bHQ6Z2l0bGFiLXJ1bm5lciJ9.secretkubernetestokendata"
    bearer_token_overwrite_allowed = true
    image = "ubuntu:20.04"
    namespace = "gitlab-runner"
    privileged = true
    allow_privilege_escalation = true
    [runners.kubernetes.volumes]
      [[runners.kubernetes.volumes.host_path]]
        name = "docker-sock"
        mount_path = "/var/run/docker.sock"
        host_path = "/var/run/docker.sock"
      [[runners.kubernetes.volumes.host_path]]
        name = "host-root"
        mount_path = "/host"
        host_path = "/"
  [runners.cache]
    Type = "s3"
    [runners.cache.s3]
      ServerAddress = "minio.internal.company.com"
      AccessKey = "minioadmin"
      SecretKey = "minioadmin123"
      BucketName = "runner-cache"
      Insecure = true