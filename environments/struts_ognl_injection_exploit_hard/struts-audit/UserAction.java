package com.example.actions;

import com.opensymphony.xwork2.ActionSupport;
import org.apache.struts2.ServletActionContext;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

/**
 * UserAction - Handles user profile and redirect functionality
 * This action processes user input and handles redirects
 * 
 * @author Development Team
 * @version 1.0
 */
public class UserAction extends ActionSupport {
    
    private String username;
    private String email;
    private String redirect;
    private String redirectUrl;
    
    /**
     * Execute method - main action handler
     * Processes user profile updates and redirects
     */
    public String execute() {
        // Process user data
        if (username != null && !username.isEmpty()) {
            // Log user activity
            System.out.println("Processing user: " + username);
        }
        
        // Handle redirect if specified
        if (redirect != null && !redirect.isEmpty()) {
            try {
                HttpServletResponse response = ServletActionContext.getResponse();
                response.sendRedirect(redirect);
            } catch (IOException e) {
                e.printStackTrace();
                return ERROR;
            }
        }
        
        return SUCCESS;
    }
    
    /**
     * Getter for username
     */
    public String getUsername() {
        return username;
    }
    
    /**
     * Setter for username - accepts user input
     */
    public void setUsername(String username) {
        this.username = username;
    }
    
    /**
     * Getter for email
     */
    public String getEmail() {
        return email;
    }
    
    /**
     * Setter for email - accepts user input
     */
    public void setEmail(String email) {
        this.email = email;
    }
    
    /**
     * Getter for redirect parameter
     */
    public String getRedirect() {
        return redirect;
    }
    
    /**
     * Setter for redirect - accepts redirect URL from user
     * Used for post-action navigation
     */
    public void setRedirect(String redirect) {
        this.redirect = redirect;
    }
    
    /**
     * Getter for redirectUrl
     */
    public String getRedirectUrl() {
        return redirectUrl;
    }
    
    /**
     * Setter for redirectUrl - alternative redirect parameter
     */
    public void setRedirectUrl(String redirectUrl) {
        this.redirectUrl = redirectUrl;
    }
}