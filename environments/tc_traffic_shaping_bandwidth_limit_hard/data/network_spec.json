[
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"```python"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"import json"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"# Read the network specification"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"    spec = json.load(f)"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"# Generate the traffic control script"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"script_lines = ["
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"    \"\""
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"]"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"for interface in spec['interfaces']:"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"    name = interface['name']"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"    max_bw = interface['max_bandwidth_mbit']"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"    guaranteed_bw = interface['guaranteed_bandwidth_mbit']"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"    priority = interface['priority']"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"    ports = interface['ports']"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"    # Add section header"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"    script_lines.append(f\"# Configure {name} ({priority} priority)\")"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"    # Clear existing rules"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"    script_lines.append(f\"tc qdisc del dev {name} root 2>\/dev\/null || true\")"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"    script_lines.append(\"\")"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"    # Create root qdisc with HTB"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"    script_lines.append(f\"tc qdisc add dev {name} root handle 1: htb default 30\")"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"    # Create root class with max bandwidth"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"    script_lines.append(f\"tc class add dev {name} parent 1: classid 1:1 htb rate {max_bw}mbit\")"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"    # Create main traffic class with guaranteed bandwidth"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"    if guaranteed_bw > 0:"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"        # Calculate burst based on priority"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"        if priority == \"high\":"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"            burst = \"15k\""
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"            qdisc_type = \"pfifo\""
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"        elif priority == \"medium\":"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"            burst = \"10k\""
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"            qdisc_type = \"pfifo\""
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"        else:"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"            burst = \"5k\""
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"            qdisc_type = \"pfifo\""
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"        script_lines.append(f\"tc class add dev {name} parent 1:1 classid 1:10 htb rate {guaranteed_bw}mbit ceil {max_bw}mbit burst {burst}\")"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"    else:"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"        # For low priority with no guaranteed bandwidth"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"        script_lines.append(f\"tc class add dev {name} parent 1:1 classid 1:10 htb rate 1mbit ceil {max_bw}mbit burst 5k\")"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"    # Add leaf qdisc based on priority"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"    if priority == \"high\":"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"        script_lines.append(f\"tc qdisc add dev {name} parent 1:10 handle 10: pfifo limit 100\")"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"    elif priority == \"medium\":"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"        script_lines.append(f\"tc qdisc add dev {name} parent 1:10 handle 10: pfifo limit 50\")"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"    else:"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"        script_lines.append(f\"tc qdisc add dev {name} parent 1:10 handle 10: pfifo limit 30\")"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"    # Create default class for unmatched traffic"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"    script_lines.append(f\"tc class add dev {name} parent 1:1 classid 1:30 htb rate 1mbit ceil {max_bw}mbit\")"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"    # Add filters for specified ports"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"    if ports:"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"        for port in ports:"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"            # Filter for destination port"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"            script_lines.append(f\"tc filter add dev {name} protocol ip parent 1:0 prio 1 u32 match ip dport {port} 0xffff flowid 1:10\")"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"            # Filter for source port"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"            script_lines.append(f\"tc filter add dev {name} protocol ip parent 1:0 prio 1 u32 match ip sport {port} 0xffff flowid 1:10\")"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"    script_lines.append(\"\")"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"# Write the script"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"    f.write('\\n'.join(script_lines))"
  },
  {
    "I need to parse the network specification file and generate traffic control commands. Let me first read the specification file and then create the shell script.":"print(\"Traffic control script generated successfully at \/solution\/tc_commands.sh\")"
  }
]