#!/usr/bin/env ruby

require 'yaml'

def process_configuration(file_path)
  unless File.exist?(file_path)
    puts "Error: Configuration file not found at #{file_path}"
    exit 1
  end

  puts "[*] Reading configuration file: #{file_path}"
  config_content = File.read(file_path)
  
  puts "[*] Parsing YAML configuration..."
  # Vulnerable: Using YAML.load instead of YAML.safe_load
  config = YAML.load(config_content)
  
  puts "[+] Configuration loaded successfully!"
  puts "[+] Configuration details:"
  puts config.inspect
  
  return config
end

if ARGV.length != 1
  puts "Usage: ruby process_config.rb <config_file.yml>"
  exit 1
end

config_file = ARGV[0]
process_configuration(config_file)