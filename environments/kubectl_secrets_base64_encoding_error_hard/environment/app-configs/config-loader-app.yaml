apiVersion: v1
kind: ConfigMap
metadata:
  name: config-loader-app
  namespace: production
data:
  app.yaml: |
    # Configuration loader application
    # This app reads JSON configuration files from mounted secrets
    # The JSON must be valid after Kubernetes decodes from base64
    
    config_sources:
      - path: /etc/config/app-config.json
        format: json
        required_keys:
          - api_url
          - timeout
          - retry
        # Must be valid JSON with all required keys
      
      - path: /etc/config/feature-flags.json
        format: json
        required_keys:
          - feature_a
          - feature_b
        # Must be valid JSON with boolean values
    
    validation:
      strict_json: true
      fail_on_error: true