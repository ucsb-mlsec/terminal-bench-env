class Post < ActiveRecord::Base
  attr_accessible :title, :content, :category_id
  
  belongs_to :user
  belongs_to :category
  has_many :comments, dependent: :destroy
  
  validates :title, presence: true
  validates :content, presence: true
  validates :user_id, presence: true
  
  scope :published, where(published: true)
  scope :approved, where(approved: true)
  scope :pending, where(approved: false)
  
  def publish!
    update_attributes(published: true)
  end
  
  def approve!
    update_attributes(approved: true, published: true)
  end
end