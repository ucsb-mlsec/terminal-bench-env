import numpy as np
from PIL import Image
import os

def create_test_image():
    """Create a 32x32 test image with colorful pattern"""
    img = np.zeros((32, 32, 3), dtype=np.uint8)
    
    # Create a gradient pattern across the image
    for i in range(32):
        for j in range(32):
            # Red channel: horizontal gradient
            img[i, j, 0] = int((j / 31) * 255)
            # Green channel: vertical gradient
            img[i, j, 1] = int((i / 31) * 255)
            # Blue channel: diagonal pattern
            img[i, j, 2] = int(((i + j) / 62) * 255)
    
    # Add some distinct colored blocks for visual verification
    # Red block (top-left)
    img[2:6, 2:6, :] = [255, 0, 0]
    
    # Green block (top-right)
    img[2:6, 26:30, :] = [0, 255, 0]
    
    # Blue block (bottom-left)
    img[26:30, 2:6, :] = [0, 0, 255]
    
    # Yellow block (bottom-right)
    img[26:30, 26:30, :] = [255, 255, 0]
    
    # White center dot
    img[15:17, 15:17, :] = [255, 255, 255]
    
    return img

# Create the directory structure
os.makedirs('/workspace/input', exist_ok=True)

# Generate and save the test image
test_img = create_test_image()
pil_img = Image.fromarray(test_img, 'RGB')
pil_img.save('/workspace/input/img1.png')

print("Test image generated: /workspace/input/img1.png")
print(f"Image shape: {test_img.shape}")
print(f"Value range: [{test_img.min()}, {test_img.max()}]")