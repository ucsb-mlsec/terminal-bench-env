#!/bin/bash

# Web Application Service
# This application binds to network port 8080 and requires network connectivity

# Check if network is available
if ! ip addr show | grep -q "inet "; then
    echo "ERROR: No network connectivity detected"
    exit 1
fi

# Check if we can resolve hostnames
if ! getent hosts localhost > /dev/null 2>&1; then
    echo "ERROR: DNS/hostname resolution not available"
    exit 1
fi

echo "Starting webapp on port 8080..."

# Simulate application startup
sleep 2

echo "Webapp started successfully"
echo "Listening on 0.0.0.0:8080"

# Keep the service running
while true; do
    sleep 30
done