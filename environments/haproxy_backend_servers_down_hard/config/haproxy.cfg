global
    maxconn 2000
    log /dev/log local0
    user haproxy
    group haproxy
    daemon

defaults
    mode http
    log global
    option httplog
    timeout connect 5000ms
    timeout client 50000ms
    timeout server 50000ms

frontend web_frontend
    bind *:80
    default_backend app_servers

backend app_servers
    balance roundrobin
    option httpchk GET /health
    http-check expect status 200
    option httpchk
    inter 0
    server server1 10.0.1.10:9000 check
    server server2 10.0.1.11:9000 check
    server server3 10.0.1.12:9000 check-interval 2000