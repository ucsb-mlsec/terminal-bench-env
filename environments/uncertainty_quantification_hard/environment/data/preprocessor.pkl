import pickle
from sklearn.feature_extraction.text import TfidfVectorizer
import numpy as np

# Create a fitted TfidfVectorizer with a vocabulary
vectorizer = TfidfVectorizer(
    max_features=5000,
    lowercase=True,
    strip_accents='unicode',
    stop_words='english',
    ngram_range=(1, 2),
    min_df=2,
    max_df=0.95
)

# Create a realistic sample corpus to fit the vectorizer
sample_corpus = [
    "This product is absolutely amazing and exceeded my expectations",
    "Terrible quality, would not recommend to anyone",
    "Great value for money, very satisfied with purchase",
    "Disappointed with the service and product quality",
    "Excellent customer service and fast shipping",
    "Worst purchase ever, complete waste of money",
    "Love this item, will definitely buy again",
    "Poor quality control, arrived damaged",
    "Outstanding product, highly recommend",
    "Not worth the price, very disappointed",
    "Perfect for my needs, exactly as described",
    "Cheap materials, broke after one use",
    "Best purchase I've made this year",
    "Awful experience, do not buy",
    "Good quality and reasonable price",
    "Defective product, requesting refund",
    "Impressed with the craftsmanship",
    "Misleading description, not as advertised",
    "Fantastic product, exceeded expectations",
    "Terrible customer support experience",
    "Very happy with this purchase",
    "Complete disaster, avoid at all costs",
    "Solid product, does what it promises",
    "Regret buying this, total disappointment",
    "Incredible value, amazing quality",
    "Horrible experience from start to finish",
    "Pleasantly surprised by the quality",
    "Waste of time and money",
    "Reliable and durable product",
    "Broken on arrival, poor packaging",
    "Exactly what I was looking for",
    "Subpar quality, not satisfied",
    "Brilliant design and functionality",
    "Cheaply made, falls apart easily",
    "Superb quality, well worth it",
    "Major quality issues, returning",
    "Delighted with my purchase",
    "Awful quality, very upset",
    "Top-notch product and service",
    "Faulty item, poor experience",
    "Really pleased with the results",
    "Disappointing quality for the price",
    "Exceptional product, highly satisfied",
    "Frustrating experience overall",
    "Great addition to my collection",
    "Shoddy workmanship, unacceptable",
    "Wonderful product, no complaints",
    "Unreliable and poorly made",
    "Very good quality and design",
    "Unacceptable quality standards"
]

# Fit the vectorizer on the sample corpus
vectorizer.fit(sample_corpus)

# Save the fitted vectorizer
with open('/workspace/preprocessor.pkl', 'wb') as f:
    pickle.dump(vectorizer, f)