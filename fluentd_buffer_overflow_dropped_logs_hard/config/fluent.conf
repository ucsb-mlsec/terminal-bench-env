# Production configuration
# Fluentd configuration for application log forwarding

<source>
  @type tail
  @id input_app_logs
  path /var/log/apps/*.log
  pos_file /var/fluent/pos/apps.pos
  tag app.logs
  <parse>
    @type json
  </parse>
</source>

<match app.**>
  @type http
  @id output_http
  endpoint http://log-collector.internal:24224/logs
  
  <buffer>
    @type memory
    total_limit_size 50MB
    chunk_limit_size 256KB
    queue_limit_length 8
    flush_interval 30s
    retry_max_interval 10s
    retry_timeout 60s
    overflow_action throw_exception
  </buffer>
</match>