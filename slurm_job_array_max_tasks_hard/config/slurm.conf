# slurm.conf - SLURM configuration file for research-cluster
# WARNING: This configuration contains intentional errors for diagnostic purposes

# GLOBAL CONFIGURATION
ClusterName=research-cluster
ControlMachine=slurmctld
SlurmctldPort=6817
SlurmdPort=6818
AuthType=auth/munge
StateSaveLocation=/var/spool/slurm/ctld
SlurmdSpoolDir=/var/spool/slurm/d
SwitchType=switch/none
MpiDefault=none
SlurmctldPidFile=/var/run/slurmctld.pid
SlurmdPidFile=/var/run/slurmd.pid
ProctrackType=proctrack/pgid
ReturnToService=1
SlurmctldTimeout=300
SlurmdTimeout=300

# SCHEDULER CONFIGURATION
SchedulerType=sched/backfill
SelectType=select/cons_tres
SelectTypeParameters=CR_Core_Memory

# ACCOUNTING
AccountingStorageType=accounting_storage/slurmdbd
JobAcctGatherType=jobacct_gather/linux

# GLOBAL JOB/TASK LIMITS (CONTAINS ERRORS)
MaxArraySize=10000
MaxJobCount=50000
# ERROR 1: Missing MaxSubmitJobs parameter
MaxTasksPerUser=2000

# NODE DEFINITIONS
NodeName=node[001-100] CPUs=32 RealMemory=128000 State=UNKNOWN
NodeName=node[101-120] CPUs=64 RealMemory=512000 State=UNKNOWN
NodeName=gpu[001-010] CPUs=32 RealMemory=256000 Gres=gpu:4 State=UNKNOWN

# PARTITION: STANDARD (CONTAINS ERRORS)
PartitionName=standard Nodes=node[001-100] Default=YES MaxTime=7-00:00:00 State=UP MaxArraySize=3000 MaxNodes=10 DefMemPerCPU=2048
# ERROR 2: MaxArraySize=3000 is INCORRECT (should be 5000)
# ERROR 3: Missing MaxTasksPerUser parameter for standard partition

# PARTITION: HIGHMEM (CONTAINS ERRORS)
PartitionName=highmem Nodes=node[101-120] Default=NO MaxTime=14-00:00:00 State=UP MaxArraySize=5000 MaxJobCount=1000 MaxNodes=5 DefMemPerCPU=16384
# ERROR 4: MaxArraySize=5000 is INCORRECT (should be 2000, conflicts with capacity)
# ERROR 5: MaxJobCount=1000 is INCORRECT (too low for demand)
# ERROR 6: Missing MaxSubmitJobs parameter for highmem partition

# PARTITION: GPU (CONTAINS ERRORS)
PartitionName=gpu Nodes=gpu[001-010] Default=NO MaxTime=3-00:00:00 State=UP MaxArraySize=1000 MaxJobCount=200 MaxNodes=4 Gres=gpu:4 DefMemPerCPU=8192 MaxTasksPerUser=50
# ERROR 7: MaxArraySize=1000 is INCORRECT (should be 500)
# ERROR 8: MaxTasksPerUser=50 is INCORRECT (too restrictive for gpu workloads)