# -----------------------------
# PostgreSQL configuration file
# -----------------------------

#------------------------------------------------------------------------------
# FILE LOCATIONS
#------------------------------------------------------------------------------

data_directory = '/var/lib/postgresql/14/main'
hba_file = '/etc/postgresql/14/main/pg_hba.conf'
ident_file = '/etc/postgresql/14/main/pg_ident.conf'

#------------------------------------------------------------------------------
# CONNECTIONS AND AUTHENTICATION
#------------------------------------------------------------------------------

# - Connection Settings -

listen_addresses = 'localhost'
port = 5432
max_connections = 100
#superuser_reserved_connections = 3
#unix_socket_directories = '/var/run/postgresql'
#unix_socket_group = ''
#unix_socket_permissions = 0777

# - Authentication -

#authentication_timeout = 1min
#password_encryption = scram-sha-256

#------------------------------------------------------------------------------
# RESOURCE USAGE (except WAL)
#------------------------------------------------------------------------------

# - Memory -

#shared_buffers = 128MB
# Note: Increase this value for production workloads
# Recommend 25% of system RAM for dedicated database servers

#huge_pages = try
# try - attempts to use huge pages
# on - requires huge pages, fails if not available
# off - disables huge pages

#temp_buffers = 8MB
work_mem = 4MB
maintenance_work_mem = 64MB
#autovacuum_work_mem = -1
#max_stack_depth = 2MB
#shared_memory_type = mmap
#dynamic_shared_memory_type = posix

# - Disk -

#temp_file_limit = -1

# - Kernel Resources -

#max_files_per_process = 1000

# - Cost-Based Vacuum Delay -

#vacuum_cost_delay = 0
#vacuum_cost_page_hit = 1
#vacuum_cost_page_miss = 10
#vacuum_cost_page_dirty = 20
#vacuum_cost_limit = 200

# - Background Writer -

#bgwriter_delay = 200ms
#bgwriter_lru_maxpages = 100
#bgwriter_lru_multiplier = 2.0

# - Asynchronous Behavior -

#effective_io_concurrency = 1
#max_worker_processes = 8
#max_parallel_workers_per_gather = 2
#max_parallel_maintenance_workers = 2
#max_parallel_workers = 8

#------------------------------------------------------------------------------
# WRITE-AHEAD LOG
#------------------------------------------------------------------------------

# - Settings -

wal_level = replica
#fsync = on
#synchronous_commit = on
#wal_sync_method = fsync
#full_page_writes = on
#wal_compression = off
#wal_log_hints = off

# - Checkpoints -

#checkpoint_timeout = 5min
max_wal_size = 1GB
#min_wal_size = 80MB
#checkpoint_completion_target = 0.5
#checkpoint_flush_after = 256kB
#checkpoint_warning = 30s

#------------------------------------------------------------------------------
# REPLICATION
#------------------------------------------------------------------------------

#max_wal_senders = 10
#wal_keep_size = 0
#max_replication_slots = 10

#------------------------------------------------------------------------------
# QUERY TUNING
#------------------------------------------------------------------------------

# - Planner Method Configuration -

#enable_bitmapscan = on
#enable_hashjoin = on
#enable_indexscan = on
#enable_seqscan = on

# - Planner Cost Constants -

random_page_cost = 4.0
#seq_page_cost = 1.0
#cpu_tuple_cost = 0.01
effective_cache_size = 4GB
#jit = on

#------------------------------------------------------------------------------
# REPORTING AND LOGGING
#------------------------------------------------------------------------------

# - Where to Log -

#log_destination = 'stderr'
logging_collector = on
log_directory = 'log'
log_filename = 'postgresql-%Y-%m-%d_%H%M%S.log'
#log_file_mode = 0600
#log_truncate_on_rotation = off
#log_rotation_age = 1d
#log_rotation_size = 10MB

# - When to Log -

#log_min_messages = warning
#log_min_error_statement = error
#log_min_duration_statement = -1

# - What to Log -

#log_checkpoints = off
#log_connections = off
#log_disconnections = off
#log_duration = off
#log_line_prefix = '%m [%p] '
#log_lock_waits = off
#log_statement = 'none'
#log_timezone = 'UTC'

#------------------------------------------------------------------------------
# AUTOVACUUM
#------------------------------------------------------------------------------

#autovacuum = on
#autovacuum_max_workers = 3
#autovacuum_naptime = 1min

#------------------------------------------------------------------------------
# CLIENT CONNECTION DEFAULTS
#------------------------------------------------------------------------------

# - Locale and Formatting -

datestyle = 'iso, mdy'
#timezone = 'UTC'
#lc_messages = 'en_US.UTF-8'
#lc_monetary = 'en_US.UTF-8'
#lc_numeric = 'en_US.UTF-8'
#lc_time = 'en_US.UTF-8'
#default_text_search_config = 'pg_catalog.english'