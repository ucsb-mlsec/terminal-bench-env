# Mosquitto Configuration File
# Deployed: 2024-01-15
# Environment: Production IoT Infrastructure

# ========================================
# BROKER SETTINGS
# ========================================
port 1883
listener 1883 0.0.0.0
protocol mqtt

# Bind to all interfaces for maximum connectivity
bind_address 0.0.0.0

# ========================================
# PERSISTENCE
# ========================================
persistence true
persistence_location /var/lib/mosquitto/
autosave_interval 1800

# ========================================
# LOGGING
# ========================================
log_dest file /var/log/mosquitto/mosquitto.log
log_type all
log_type error
log_type warning
log_type notice
log_type information
log_timestamp true
log_timestamp_format %Y-%m-%dT%H:%M:%S

# ========================================
# SECURITY SETTINGS (CRITICAL ISSUES)
# ========================================

# WARNING: Anonymous access enabled for testing
# TODO: Disable before production deployment
allow_anonymous true

# Authentication disabled - REMOVE THIS FOR PRODUCTION
# password_file /etc/mosquitto/passwd

# Access Control Lists disabled
# acl_file /etc/mosquitto/acl.conf

# No username/password required
# This allows ANY client to connect without credentials

# ========================================
# TLS/SSL CONFIGURATION - DISABLED
# ========================================
# SECURITY RISK: TLS encryption not enabled
# All traffic transmitted in PLAINTEXT

# cafile /etc/mosquitto/ca.crt
# certfile /etc/mosquitto/server.crt
# keyfile /etc/mosquitto/server.key
# require_certificate false
# tls_version tlsv1.2

# ========================================
# NETWORK SETTINGS
# ========================================
max_connections -1
max_queued_messages 1000
message_size_limit 0

# Connection timeout
keepalive_interval 60

# ========================================
# BRIDGE CONFIGURATION
# ========================================
# No bridge configuration

# ========================================
# NOTES
# ========================================
# Configuration deployed without security hardening
# Authentication: DISABLED (allow_anonymous true)
# Authorization: DISABLED (no ACL file)
# Encryption: DISABLED (no TLS/SSL)
# 
# RISK LEVEL: CRITICAL
# Any client can connect, subscribe to all topics, and publish messages
# All data transmitted in plaintext over the network