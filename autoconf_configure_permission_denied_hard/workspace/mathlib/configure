#!/bin/sh
# configure - Configuration script for mathlib
# Generated by GNU Autoconf 2.69 for mathlib 1.0

# Copyright (C) 1992-1996, 1998-2012 Free Software Foundation, Inc.

# This configure script is free software; the Free Software Foundation
# gives unlimited permission to copy, distribute and modify it.

# Global variables
PACKAGE_NAME='mathlib'
PACKAGE_VERSION='1.0'
PACKAGE_STRING='mathlib 1.0'
PACKAGE_TARNAME='mathlib'
PACKAGE_BUGREPORT='bugs@mathlib.example.com'
PACKAGE_URL=''

# Installation directories
prefix='/usr/local'
exec_prefix='${prefix}'
bindir='${exec_prefix}/bin'
sbindir='${exec_prefix}/sbin'
libexecdir='${exec_prefix}/libexec'
datarootdir='${prefix}/share'
datadir='${datarootdir}'
sysconfdir='${prefix}/etc'
sharedstatedir='${prefix}/com'
localstatedir='${prefix}/var'
includedir='${prefix}/include'
oldincludedir='/usr/include'
docdir='${datarootdir}/doc/${PACKAGE_TARNAME}'
infodir='${datarootdir}/info'
htmldir='${docdir}'
dvidir='${docdir}'
pdfdir='${docdir}'
psdir='${docdir}'
libdir='${exec_prefix}/lib'
localedir='${datarootdir}/locale'
mandir='${datarootdir}/man'

# Build and host system types
build_alias=''
host_alias=''
target_alias=''

# Compiler and tool variables
CC=''
CFLAGS='-g -O2'
LDFLAGS=''
LIBS=''
CPPFLAGS=''
CPP=''
ac_ct_CC=''
EXEEXT=''
OBJEXT='o'
INSTALL=''
INSTALL_PROGRAM=''
INSTALL_SCRIPT=''
INSTALL_DATA=''
RANLIB=''
AR=''
LIBTOOL=''

# Helper function: Check if C compiler works
ac_fn_c_try_compile ()
{
  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
  rm -f conftest.$ac_objext
  if { { ac_try="$ac_compile"
case "(($ac_try" in
  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
  *) ac_try_echo=$ac_try;;
esac
eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
$as_echo "$ac_try_echo"; } >&5
  (eval "$ac_compile") 2>conftest.err
  ac_status=$?
  if test -s conftest.err; then
    grep -v '^ *+' conftest.err >conftest.er1
    cat conftest.er1 >&5
    mv -f conftest.er1 conftest.err
  fi
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; } && {
	 test -z "$ac_c_werror_flag" ||
	 test ! -s conftest.err
       } && test -s conftest.$ac_objext; then :
  ac_retval=0
else
  $as_echo "$as_me: failed program was:" >&5
sed 's/^/| /' conftest.$ac_ext >&5
  ac_retval=1
fi
  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
  as_fn_set_status $ac_retval
}

# Helper function: Try to link
ac_fn_c_try_link ()
{
  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
  rm -f conftest.$ac_objext conftest$ac_exeext
  if { { ac_try="$ac_link"
case "(($ac_try" in
  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
  *) ac_try_echo=$ac_try;;
esac
eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
$as_echo "$ac_try_echo"; } >&5
  (eval "$ac_link") 2>conftest.err
  ac_status=$?
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; }; then :
  ac_retval=0
else
  $as_echo "$as_me: failed program was:" >&5
  ac_retval=1
fi
  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
  as_fn_set_status $ac_retval
}

# Helper function: Check for C preprocessor
ac_fn_c_try_cpp ()
{
  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
  if { { ac_try="$ac_cpp conftest.$ac_ext"
case "(($ac_try" in
  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
  *) ac_try_echo=$ac_try;;
esac
eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
$as_echo "$ac_try_echo"; } >&5
  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.err
  ac_status=$?
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; }; then :
  ac_retval=0
else
  ac_retval=1
fi
  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
  as_fn_set_status $ac_retval
}

# Parse command line arguments
ac_prev=
for ac_option
do
  if test -n "$ac_prev"; then
    eval $ac_prev=\$ac_option
    ac_prev=
    continue
  fi

  case $ac_option in
  *=?*) ac_optarg=`expr "X$ac_option" : '[^=]*=\(.*\)'` ;;
  *=)   ac_optarg= ;;
  *)    ac_optarg=yes ;;
  esac

  case $ac_option in
  --prefix | --prefi | --pref | --pre | --pr | --p)
    ac_prev=prefix ;;
  --prefix=* | --prefi=* | --pref=* | --pre=* | --pr=* | --p=*)
    prefix=$ac_optarg ;;

  --exec-prefix | --exec_prefix | --exec-prefi | --exec_prefi)
    ac_prev=exec_prefix ;;
  --exec-prefix=* | --exec_prefix=* | --exec-prefi=* | --exec_prefi=*)
    exec_prefix=$ac_optarg ;;

  --bindir | --bindi | --bind | --bin | --bi)
    ac_prev=bindir ;;
  --bindir=* | --bindi=* | --bind=* | --bin=* | --bi=*)
    bindir=$ac_optarg ;;

  --libdir | --libdi | --libd)
    ac_prev=libdir ;;
  --libdir=* | --libdi=* | --libd=*)
    libdir=$ac_optarg ;;

  --includedir | --includedi | --included | --include | --includ | --inclu | --incl | --inc)
    ac_prev=includedir ;;
  --includedir=* | --includedi=* | --included=* | --include=* | --includ=* | --inclu=* | --incl=* | --inc=*)
    includedir=$ac_optarg ;;

  --help | --hel | --he | -h)
    cat <<_ACEOF
\`configure' configures mathlib 1.0 to adapt to many kinds of systems.

Usage: $0 [OPTION]... [VAR=VALUE]...

Configuration:
  -h, --help              display this help and exit
  --help=short        display options specific to this package
  --version           display version information and exit

Installation directories:
  --prefix=PREFIX         install architecture-independent files in PREFIX
                          [$prefix]
  --exec-prefix=EPREFIX   install architecture-dependent files in EPREFIX
                          [PREFIX]

Fine tuning of the installation directories:
  --bindir=DIR            user executables [EPREFIX/bin]
  --libdir=DIR            object code libraries [EPREFIX/lib]
  --includedir=DIR        C header files [PREFIX/include]

Optional Features:
  --enable-shared         build shared libraries [default=yes]
  --enable-static         build static libraries [default=yes]

Some influential environment variables:
  CC          C compiler command
  CFLAGS      C compiler flags
  LDFLAGS     linker flags
  LIBS        libraries to pass to the linker
  CPPFLAGS    C preprocessor flags
  CPP         C preprocessor

Use these variables to override the choices made by \`configure' or to help
it to find libraries and programs with nonstandard names/locations.
_ACEOF
    exit 0
    ;;

  --version | --versio | --versi | --vers | -V)
    cat <<_ACEOF
mathlib configure 1.0
generated by GNU Autoconf 2.69
_ACEOF
    exit 0
    ;;

  --enable-shared | --enable-share | --enable-shar)
    enable_shared=yes ;;
  --disable-shared | --disable-share | --disable-shar)
    enable_shared=no ;;

  --enable-static | --enable-stati | --enable-stat)
    enable_static=yes ;;
  --disable-static | --disable-stati | --disable-stat)
    enable_static=no ;;

  CC=*)
    CC=$ac_optarg ;;
  CFLAGS=*)
    CFLAGS=$ac_optarg ;;
  esac
done

# Begin configuration checks
echo "checking for a BSD-compatible install..."
echo "checking whether build environment is sane..."
echo "checking for a thread-safe mkdir -p..."
echo "checking for gawk..."
echo "checking whether make sets \$(MAKE)..."

echo "checking for gcc..."
if test -z "$CC"; then
  if command -v gcc >/dev/null 2>&1; then
    CC=gcc
    echo "  found gcc"
  elif command -v cc >/dev/null 2>&1; then
    CC=cc
    echo "  found cc"
  else
    echo "  no acceptable C compiler found in \$PATH"
    exit 1
  fi
fi

echo "checking whether the C compiler works..."
echo "checking for C compiler default output file name..."
echo "checking for suffix of executables..."
echo "checking whether we are cross compiling..."
echo "checking for suffix of object files..."
echo "checking whether we are using the GNU C compiler..."
echo "checking whether $CC accepts -g..."
echo "checking for $CC option to accept ISO C89..."

echo "checking how to run the C preprocessor..."
if test -z "$CPP"; then
  CPP="$CC -E"
fi

echo "checking for grep that handles long lines and -e..."
echo "checking for egrep..."
echo "checking for ANSI C header files..."
echo "checking for sys/types.h..."
echo "checking for sys/stat.h..."
echo "checking for stdlib.h..."
echo "checking for string.h..."
echo "checking for memory.h..."
echo "checking for strings.h..."
echo "checking for inttypes.h..."
echo "checking for stdint.h..."
echo "checking for unistd.h..."
echo "checking for math.h..."

echo "checking for library containing sqrt..."
echo "checking for pow..."
echo "checking for floor..."
echo "checking for ceil..."

echo "checking whether to build shared libraries..."
echo "checking whether to build static libraries..."
echo "checking for ranlib..."

echo "checking that generated files are newer than configure..."

# Generate output files
echo "creating config.status"
echo "configure: creating ./config.status"

cat >config.status <<_CSEOF
#!/bin/sh
# Generated by configure.
# Run this file to recreate the current configuration.

PACKAGE_NAME='$PACKAGE_NAME'
PACKAGE_VERSION='$PACKAGE_VERSION'
CC='$CC'
CFLAGS='$CFLAGS'
LDFLAGS='$LDFLAGS'
prefix='$prefix'
exec_prefix='$exec_prefix'
libdir='$libdir'
includedir='$includedir'
_CSEOF

chmod +x config.status

echo "config.status: creating Makefile"

cat >Makefile <<_MAKEOF
# Makefile generated by configure for mathlib 1.0

PACKAGE = $PACKAGE_NAME
VERSION = $PACKAGE_VERSION

CC = $CC
CFLAGS = $CFLAGS -fPIC
LDFLAGS = $LDFLAGS
LIBS = $LIBS -lm

prefix = $prefix
exec_prefix = $exec_prefix
libdir = $libdir
includedir = $includedir

SOURCES = src/mathlib.c src/matrix.c src/vector.c
OBJECTS = \$(SOURCES:.c=.o)
LIBRARY = src/.libs/libmath.so

all: \$(LIBRARY)

\$(LIBRARY): \$(OBJECTS)
	@mkdir -p src/.libs
	\$(CC) -shared -o \$@ \$(OBJECTS) \$(LDFLAGS) \$(LIBS)

%.o: %.c
	\$(CC) \$(CFLAGS) \$(CPPFLAGS) -c \$< -o \$@

clean:
	rm -f \$(OBJECTS) \$(LIBRARY)

distclean: clean
	rm -f Makefile config.status

install: \$(LIBRARY)
	mkdir -p \$(DESTDIR)\$(libdir)
	cp \$(LIBRARY) \$(DESTDIR)\$(libdir)/
	mkdir -p \$(DESTDIR)\$(includedir)
	cp src/mathlib.h \$(DESTDIR)\$(includedir)/

.PHONY: all clean distclean install
_MAKEOF

echo ""
echo "Configuration complete."
echo ""
echo "mathlib has been configured with the following options:"
echo "  Version:           $PACKAGE_VERSION"
echo "  Host type:         ${host_alias:-unknown}"
echo "  Install prefix:    $prefix"
echo "  Compiler:          $CC"
echo "  CFLAGS:            $CFLAGS"
echo ""
echo "Now type 'make' to compile mathlib."
echo ""