[
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"\/\/ Handles dynamic client credentials flow with automatic token refresh"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"(function() {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"    'use strict';"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"    \/\/ Configuration Constants"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"    const TOKEN_EXPIRY_BUFFER = 30; \/\/ Refresh token 30 seconds before expiry"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"    const TOKEN_LIFETIME = 300; \/\/ 5 minutes as specified"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"    \/**"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"     * Get current tenant configuration from environment variables"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"     *\/"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"    function getTenantConfig() {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"        return {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            customHeaderTenant: pm.environment.get('custom_header_tenant')"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"        };"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"    }"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"    \/**"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"     * Load OAuth configuration for scope mappings"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"     *\/"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"    function loadOAuthConfig() {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"        try {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            const configStr = pm.environment.get('oauth_config') || pm.globals.get('oauth_config');"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            if (configStr) {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                return JSON.parse(configStr);"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            }"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            \/\/ Default scope configuration"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            return {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                scopeMappings: {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                    'default': 'api:access'"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                customHeaders: {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                    'X-Client-Type': 'postman-test'"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                }"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            };"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"        } catch (e) {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            return {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                customHeaders: {}"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            };"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"        }"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"    }"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"    \/**"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"     * Determine required scope based on current request URL"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"     *\/"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"        try {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            const url = new URL(requestUrl);"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            const pathname = url.pathname;"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            \/\/ Check for exact matches first"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                if (pathname.startsWith(path)) {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                    return scope;"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                }"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            }"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            \/\/ Return default scope"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            return scopeMappings.default || 'api:access';"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"        } catch (e) {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            return scopeMappings.default || 'api:access';"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"        }"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"    }"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"    \/**"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"     * Check if current token is valid and not expired"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"     *\/"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"    function isTokenValid() {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"        const accessToken = pm.environment.get('access_token');"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"        const tokenExpiry = pm.environment.get('token_expiry');"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"        if (!accessToken || !tokenExpiry) {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            return false;"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"        }"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"        const currentTime = Math.floor(Date.now() \/ 1000);"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"        \/\/ Check if token is expired or will expire soon"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"        return (expiryTime - currentTime) > TOKEN_EXPIRY_BUFFER;"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"    }"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"    \/**"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"     * Request new OAuth 2.0 access token using client credentials flow"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"     *\/"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"        const tokenRequest = {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            header: {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                'Accept': 'application\/json'"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            body: {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                urlencoded: ["
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                ]"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            }"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"        };"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"        \/\/ Add audience if provided (required by some OAuth servers)"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"        if (config.audience) {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            tokenRequest.body.urlencoded.push({"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                value: config.audience"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            });"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"        }"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            if (err) {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                callback(new Error('Network failure during token request: ' + err.message));"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                return;"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            }"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            if (response.code !== 200) {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                callback(new Error('OAuth server returned error: ' + response.code));"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                return;"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            }"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            try {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                const tokenData = response.json();"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                if (!tokenData.access_token) {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                    callback(new Error('No access token in response'));"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                    return;"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                }"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                \/\/ Store token and expiration metadata"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                const expiresIn = tokenData.expires_in || TOKEN_LIFETIME;"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                const expiryTimestamp = Math.floor(Date.now() \/ 1000) + expiresIn;"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                console.log('Successfully obtained new access token');"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            } catch (parseError) {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                callback(new Error('Invalid token response format'));"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            }"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"        });"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"    }"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"    \/**"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"     * Apply authentication and custom headers to the request"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"     *\/"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"        \/\/ Set Authorization header with bearer token"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"        pm.request.headers.add({"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            value: 'Bearer ' + accessToken"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"        });"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"        \/\/ Apply custom headers from configuration"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"        if (customHeaders) {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                pm.request.headers.add({"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                    value: value"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                });"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            });"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"        }"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"        \/\/ Add tenant-specific custom header if configured"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"        if (config.customHeaderTenant) {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            pm.request.headers.add({"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                value: config.customHeaderTenant"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            });"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"        }"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"    }"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"    \/**"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"     * Main execution flow"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"     *\/"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"    function main() {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"        try {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            \/\/ Step 1: Get tenant configuration"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            const tenantConfig = getTenantConfig();"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            if (!tenantConfig.tenantId || !tenantConfig.clientId || !tenantConfig.tokenUrl) {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                throw new Error('Incomplete tenant configuration. Check environment variables.');"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            }"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            \/\/ Step 2: Load OAuth configuration"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            const oauthConfig = loadOAuthConfig();"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            \/\/ Step 3: Determine required scope"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            const requestUrl = pm.request.url.toString();"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            \/\/ Step 4: Check current token validity"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            const currentScope = pm.environment.get('token_scope');"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            const tokenValid = isTokenValid();"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            const scopeMatches = currentScope === requiredScope;"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            if (tokenValid && scopeMatches) {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                console.log('Using existing valid token');"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                const accessToken = pm.environment.get('access_token');"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            } else {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                \/\/ Need to request new token"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                if (!tokenValid) {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                } else {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                }"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                    if (err) {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                        throw err;"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                    }"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"                });"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            }"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"        } catch (error) {"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            \/\/ Set error variable for debugging"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"            throw error;"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"        }"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"    }"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"    \/\/ Execute main function"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"    main();"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"})();"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"```"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"```json"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"{"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"  \"error_handling_implemented\": true"
  },
  {
    "\/\/ Pre-Request Script for OAuth 2.0 Multi-Tenant Authentication":"}"
  }
]