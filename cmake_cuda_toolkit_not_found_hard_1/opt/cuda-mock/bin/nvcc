#!/bin/bash
# Mock CUDA compiler wrapper for testing and development
# This simulates the NVIDIA CUDA compiler (nvcc) behavior

# Handle version request
if [[ "$1" == "--version" ]]; then
    echo "nvcc: NVIDIA (R) Cuda compiler driver"
    echo "Copyright (c) 2005-2021 NVIDIA Corporation"
    echo "Built on Mock_System"
    echo "Cuda compilation tools, release 11.4, V11.4.0"
    exit 0
fi

# Handle dryrun flag
if [[ "$1" == "--dryrun" ]]; then
    echo "[Mock NVCC] Dry run mode - no actual compilation"
    exit 0
fi

# Echo what we received for debugging purposes
if [[ "$1" == "-v" ]] || [[ "$1" == "--verbose" ]]; then
    echo "[Mock NVCC] Mock compiler invoked with args: $@"
fi

# For all other invocations, pretend success
exit 0