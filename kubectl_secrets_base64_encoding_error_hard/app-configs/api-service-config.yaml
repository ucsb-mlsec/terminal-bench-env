apiVersion: v1
kind: ConfigMap
metadata:
  name: api-service-config
  namespace: production
data:
  api.yaml: |
    # API service configuration
    # This app reads API keys from environment variables
    # Kubernetes injects secrets as env vars which are already decoded
    
    stripe:
      # Environment variable STRIPE_API_KEY injected from secret
      # Expected format: sk_test_XXXXX or sk_live_XXXXX
      # Must not contain whitespace or newlines
      api_key_env: STRIPE_API_KEY
    
    sendgrid:
      # Environment variable SENDGRID_API_KEY injected from secret
      # Expected format: SG.XXXXX.YYYYY
      # Must not contain leading/trailing whitespace
      api_key_env: SENDGRID_API_KEY
    
    retry_attempts: 3
    timeout: 60