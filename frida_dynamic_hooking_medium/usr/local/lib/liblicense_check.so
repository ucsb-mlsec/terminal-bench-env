#include <string.h>
#include <ctype.h>

// Validation function that checks license key format
// Expected format: XXX-999-XXX
// Where X = uppercase letter A-Z, 9 = digit 0-9
int validate_license(const char* license_key) {
    if (license_key == NULL) {
        return 0;
    }
    
    // Check total length (11 characters including hyphens)
    size_t len = strlen(license_key);
    if (len != 11) {
        return 0;
    }
    
    // Check first segment: 3 uppercase letters
    for (int i = 0; i < 3; i++) {
        if (!isupper(license_key[i])) {
            return 0;
        }
    }
    
    // Check first separator
    if (license_key[3] != '-') {
        return 0;
    }
    
    // Check second segment: 3 digits
    for (int i = 4; i < 7; i++) {
        if (!isdigit(license_key[i])) {
            return 0;
        }
    }
    
    // Check second separator
    if (license_key[7] != '-') {
        return 0;
    }
    
    // Check third segment: 3 uppercase letters
    for (int i = 8; i < 11; i++) {
        if (!isupper(license_key[i])) {
            return 0;
        }
    }
    
    // All checks passed
    return 1;
}

// Export the validation function with C linkage
extern "C" {
    int check_license_key(const char* key) {
        return validate_license(key);
    }
}