#!/bin/bash

# Create temporary directory for archive contents
TEMP_DIR=$(mktemp -d)
cd "$TEMP_DIR"

# Create 10 small text files with varied content
cat > file001.txt << 'EOF'
Backup Archive System - Data File 001
=====================================
This is a test data file for the backup archive system.
Created: 2024-03-20
Status: Normal operation
Checksum verification: enabled

Sample data content:
Line 001: The quick brown fox jumps over the lazy dog
Line 002: Lorem ipsum dolor sit amet, consectetur adipiscing elit
Line 003: Database backup completed successfully
Line 004: All systems operational
Line 005: End of file marker
EOF

cat > file002.txt << 'EOF'
System Log Entry - March 2024
==============================
Timestamp: 2024-03-20 08:15:32
Event: Scheduled backup initiated
Status: In progress
Source: /var/www/html
Destination: /backup/archives/2024-03-20/

Files processed: 1,247
Total size: 15.3 MB
Compression ratio: 3.2:1
Estimated completion: 08:22:15

Verification stage initiated...
All checksums validated successfully.
Backup operation completed without errors.
EOF

cat > file003.txt << 'EOF'
Configuration Database Snapshot
================================
Application: WebServer-01
Environment: Production
Backup Type: Incremental
Retention Period: 90 days

Settings exported:
- Virtual hosts: 12
- SSL certificates: 8
- Server modules: 45
- Custom configurations: 23

Database connections verified: OK
Configuration syntax validated: PASS
Archive integrity check: COMPLETE
EOF

cat > file004.txt << 'EOF'
User Data Export - Batch 004
=============================
Export initiated: 2024-03-20 07:30:00
Total user records: 8,542
Active accounts: 7,891
Suspended accounts: 651

Data fields included:
- Username and email
- Account creation date
- Last login timestamp
- Preference settings
- Activity history summary

Privacy compliance: GDPR compliant
Encryption status: AES-256
Data classification: CONFIDENTIAL
EOF

cat > file005.txt << 'EOF'
Application Server Metrics
===========================
Collection period: 2024-03-19 to 2024-03-20
Server: app-server-03.internal
Monitoring interval: 5 minutes

Performance metrics:
CPU utilization: 45.2% average
Memory usage: 8.7 GB / 16 GB
Disk I/O: 125 MB/s average
Network throughput: 340 Mbps

Request statistics:
Total requests: 145,823
Successful (2xx): 142,156
Client errors (4xx): 2,891
Server errors (5xx): 776
Average response time: 187ms
EOF

cat > file006.txt << 'EOF'
Database Transaction Log Archive
==================================
Database: production_db_main
Log sequence: 2024-03-20-001
Transaction count: 45,678
Log size: 3.2 MB

Transaction summary:
INSERT operations: 12,345
UPDATE operations: 28,901
DELETE operations: 4,432
SELECT queries: 892,341

Replication status: synchronized
Backup consistency: verified
Log rotation: scheduled
Archive compression: enabled
EOF

cat > file007.txt << 'EOF'
Security Audit Trail - Daily Summary
=====================================
Audit date: 2024-03-20
Security level: HIGH
Compliance framework: SOC2, ISO27001

Events logged:
- Login attempts: 3,421 (3,398 successful, 23 failed)
- Permission changes: 47
- File access violations: 0
- Network anomalies: 2 (investigated, cleared)
- Configuration changes: 15

Critical alerts: 0
Warning level: LOW
Incident reports: 0
Overall status: SECURE

All access logs archived and encrypted.
Next audit scheduled: 2024-03-21
EOF

cat > file008.txt << 'EOF'
Media Asset Backup Manifest
============================
Asset type: Images and documents
Source directory: /var/media/uploads
Backup date: 2024-03-20
Total files: 2,847

File type breakdown:
- JPEG images: 1,456 files (8.9 GB)
- PNG images: 892 files (4.2 GB)
- PDF documents: 384 files (1.7 GB)
- Other formats: 115 files (0.6 GB)

Duplicate detection: 47 duplicates removed
Storage optimization: 12% space saved
Thumbnail generation: completed
Index updated: successfully
EOF

cat > file009.txt << 'EOF'
Email Archive Export
====================
Mailbox: backup@company.internal
Archive period: 2024-03-01 to 2024-03-20
Message count: 1,234
Total size: 456 MB

Category distribution:
- Inbox: 567 messages
- Sent: 423 messages
- Archived: 198 messages
- Spam (filtered): 46 messages

Attachments extracted: 234 files
Metadata preserved: Yes
Encryption applied: Yes
Index generated: Complete

Archive format: MBOX compatible
Restoration tested: PASSED
EOF

cat > file010.txt << 'EOF'
System State Checkpoint
========================
Checkpoint ID: CHK-20240320-001
System: backup-server-primary
Timestamp: 2024-03-20 09:00:00

Services status:
- Backup daemon: RUNNING (PID 1234)
- Checksum validator: RUNNING (PID 1235)
- Archive manager: RUNNING (PID 1236)
- Network service: RUNNING (PID 1237)

Resource utilization:
- CPU cores active: 4/8
- RAM allocated: 12.3/32 GB
- Disk space used: 2.4/10 TB
- Network bandwidth: 15% capacity

Health check: ALL SYSTEMS NOMINAL
Last maintenance: 2024-03-15
Next scheduled check: 2024-03-22
EOF

# Create the tar.gz archive
tar -czf backup_archives_2024-03-20.tar.gz file*.txt

# Move to target location
mkdir -p /tmp/backup_output
mv backup_archives_2024-03-20.tar.gz /tmp/backup_output/

# Clean up
cd /
rm -rf "$TEMP_DIR"

# Output the file as binary
cat /tmp/backup_output/backup_archives_2024-03-20.tar.gz