# OpenLDAP Server Configuration File
# /etc/ldap/slapd.conf
# Last modified: 2024-01-15

# Schema includes
include         /etc/ldap/schema/core.schema
include         /etc/ldap/schema/cosine.schema
include         /etc/ldap/schema/inetorgperson.schema
include         /etc/ldap/schema/nis.schema

# Process ID and arguments files
pidfile         /var/run/slapd/slapd.pid
argsfile        /var/run/slapd/slapd.args

# TLS Configuration
TLSCertificateFile      /etc/ldap/certs/server.crt
TLSCertificateKeyFile   /etc/ldap/certs/server.key
TLSCACertificateFile    /etc/ldap/certs/ca.crt

# Module loading (if using modules)
modulepath      /usr/lib/ldap
moduleload      back_mdb

# Security settings
security        ssf=128

# Database definition
database        mdb
suffix          "dc=example,dc=com"
rootdn          "cn=admin,dc=example,dc=com"
rootpw          {SSHA}5en6G6MezRroT3XKqkdPOmY/BFQ1GOKF

# Database directory
directory       /var/lib/ldap

# Indexes for performance
index           objectClass                     eq
index           cn,sn,uid                       pres,eq,sub
index           uidNumber,gidNumber             eq
index           member,memberUid                eq

# Database settings
maxsize         1073741824

# Access Control Lists
access to attrs=userPassword
        by self write
        by anonymous auth
        by * none

access to attrs=shadowLastChange
        by self write
        by * read

access to dn.base=""
        by * read

access to *
        by self write
        by users read
        by anonymous read

# Logging
loglevel        stats sync